webpackJsonp([2],{0:function(e,t){},1:function(e,t){},2:function(e,t){},"28JI":function(e,t){},"2YQ0":function(e,t){},"5iLf":function(e,t){},"65ra":function(e,t){},"6Jit":function(e,t){},"7FXC":function(e,t){},DMXl:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var l=a("VU/8")({name:"App"},s,!1,function(e){a("eD9u")},null,null).exports,r=a("/ocq"),o=a("mvHQ"),n=a.n(o),c=a("S6jT"),m=a.n(c),d=a("+jlW"),p=a.n(d),u={name:"VueTree",components:{VJstree:m.a,contextMenu:p.a},props:{data:{type:Array,default:function(){return[]}},id:{type:String},contextmenu:{type:Boolean,default:!0},collapse:{type:Boolean,default:!0}},data:function(){return{level:1,dialogVisible:!1,dialogTitle:"",isAdd:!0}},methods:{itemClick:function(e){this.level=e.model.level,this.$emit("item-click",e.model)},itemHandle:function(e){this.$emit("item-handle",e)}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.contextmenu?a("div",{on:{contextmenu:function(t){return t.preventDefault(),e.$refs.ctx.open(t)}}},[a("v-jstree",{attrs:{data:e.data,collapse:e.collapse},on:{"item-click":e.itemClick,"item-toggle":e.itemClick}})],1):a("v-jstree",{attrs:{data:e.data,collapse:e.collapse},on:{"item-click":e.itemClick,"item-toggle":e.itemClick}}),e._v(" "),a("context-menu",{ref:"ctx",attrs:{id:"ctx"}},[a("li",{staticClass:"ctx-header"}),e._v(" "),1===e.level||2===e.level&&e.id&&"1"===e.id.slice(0,1)?a("li",{staticClass:"ctx-item",on:{click:function(t){return e.itemHandle("add")}}},[e._v("新建"+e._s(1===e.level?"通道":"设备"))]):e._e(),e._v(" "),1!==e.level?a("li",{staticClass:"ctx-item",on:{click:function(t){return e.itemHandle("del")}}},[e._v("删除"+e._s(2===e.level?"通道":"设备"))]):e._e(),e._v(" "),1===e.level||2===e.level&&e.id&&"1"===e.id.slice(0,1)?a("li",{staticClass:"ctx-sperator"},[a("hr")]):e._e(),e._v(" "),1===e.level||2===e.level&&e.id&&"1"===e.id.slice(0,1)?a("li",{staticClass:"ctx-item",on:{click:function(t){return e.itemHandle("copy")}}},[e._v("复制"+e._s(1===e.level?"通道":"设备"))]):e._e(),e._v(" "),1!==e.level&&e.id&&"1"===e.id.slice(0,1)?a("li",{staticClass:"ctx-sperator"},[a("hr")]):e._e(),e._v(" "),1!==e.level&&e.id&&"1"===e.id.slice(0,1)?a("li",{staticClass:"ctx-item",on:{click:function(t){return e.itemHandle("up")}}},[e._v(e._s(2===e.level?"通道":"设备")+"上移")]):e._e(),e._v(" "),1!==e.level&&e.id&&"1"===e.id.slice(0,1)?a("li",{staticClass:"ctx-item",on:{click:function(t){return e.itemHandle("down")}}},[e._v(e._s(2===e.level?"通道":"设备")+"下移")]):e._e()])],1)},staticRenderFns:[]};var h=a("VU/8")(u,f,!1,function(e){a("28JI")},"data-v-1ee69b21",null).exports,g={components:{LeftTree:h},props:{id:{type:String},formPass:{type:Object,default:function(){}},pluginList:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,dialogTitle:""}},methods:{pluginSelect:function(){this.dialogVisible=!0,this.pluginOrg=JSON.parse(n()(this.formPass.plugin)),this.dialogTitle="插件选择-"+("1"===this.id.slice(0,1)?"采集":"数据服务")},pluginClick:function(e){this.$emit("plugin-click",e)}},watch:{dialogVisible:function(e){var t=this;!0===e&&this.pluginList.forEach(function(e){e.opened=!1,t.formPass.plugin.classification===e.text&&(e.opened=!0),e.children.forEach(function(e){e.selected=!1,t.formPass.plugin.name===e.name&&(e.selected=!0)})})}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dialogVisible?a("el-dialog",{staticClass:"plugin-dialog",attrs:{title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-container",[a("el-aside",{staticClass:"left-panel"},[a("left-tree",{staticClass:"left-panel-tree",attrs:{data:e.pluginList,contextmenu:!1,collapse:!1},on:{"item-click":e.pluginClick}})],1),e._v(" "),a("el-container",{staticClass:"right-panel is-vertical"},[a("el-form",{attrs:{"label-position":"left"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{"label-width":"55px",label:"名称："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formPass.plugin.name,callback:function(t){e.$set(e.formPass.plugin,"name",t)},expression:"formPass.plugin.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{"label-width":"55px",label:"描述："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formPass.plugin.describe,callback:function(t){e.$set(e.formPass.plugin,"describe",t)},expression:"formPass.plugin.describe"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{"label-width":"55px",label:"分类："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formPass.plugin.classification,callback:function(t){e.$set(e.formPass.plugin,"classification",t)},expression:"formPass.plugin.classification"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{"label-width":"55px",label:"厂家："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formPass.plugin.factory,callback:function(t){e.$set(e.formPass.plugin,"factory",t)},expression:"formPass.plugin.factory"}})],1)],1)],1),e._v(" "),a("el-table",{attrs:{data:e.formPass.plugin.plugins,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"插件名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"platform",label:"平台",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"edition",label:"版本",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastModifiedDate",label:"最后修改日期",width:"160"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1,e.formPass.plugin=e.pluginOrg}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1):e._e()},staticRenderFns:[]};var v=a("VU/8")(g,b,!1,function(e){a("qoqu")},"data-v-6c5ced3e",null).exports,y={props:{id:{type:String},formPass:{type:Object},passTypeList:{type:Array},sataList:{type:Array},baudList:{type:Array},dataList:{type:Array},checkList:{type:Array},stopList:{type:Array}},data:function(){return{dialogVisible:!1,dialogTitle:""}},methods:{setParams:function(){this.dialogVisible=!0,this.paramsOrg=JSON.parse(n()(this.formPass.otherParams)),this.dialogTitle=("1"===this.id.slice(0,1)?"采集":"数据服务")+"通道 其他参数"}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"params-dialog",attrs:{title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-row",{staticClass:"params-dialog-row"},[a("el-checkbox",{model:{value:e.formPass.otherParams.scanDelay,callback:function(t){e.$set(e.formPass.otherParams,"scanDelay",t)},expression:"formPass.otherParams.scanDelay"}},[e._v("启用扫描间延迟")]),e._v(" "),a("div",{staticClass:"params-dialog-row-div"},[e._v("\n      延迟时间（毫秒）\n      "),a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!e.formPass.otherParams.scanDelay},model:{value:e.formPass.otherParams.delayTime,callback:function(t){e.$set(e.formPass.otherParams,"delayTime",t)},expression:"formPass.otherParams.delayTime"}}),e._v(" "),a("el-popover",{staticStyle:{"margin-left":"5px"},attrs:{placement:"top-start",title:"提示",width:"200",trigger:"hover",content:"该参数使用一些比较慢的设备，帧与帧之间需要有一定的间隔，否则设备不能正常工作"}},[a("el-button",{attrs:{slot:"reference",type:"primary",plain:""},slot:"reference"},[e._v("?")])],1)],1)],1),e._v(" "),e.id&&"1"===e.id.slice(0,1)?a("el-row",{staticClass:"params-dialog-row"},[a("el-checkbox",{model:{value:e.formPass.otherParams.linkReset,callback:function(t){e.$set(e.formPass.otherParams,"linkReset",t)},expression:"formPass.otherParams.linkReset"}},[e._v("启用链路复位机制")]),e._v(" "),a("div",{staticClass:"params-dialog-row-div"},[e._v("\n      端口无接收数据时间（秒）\n      "),a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!e.formPass.otherParams.linkReset},model:{value:e.formPass.otherParams.linkNoDataTime,callback:function(t){e.$set(e.formPass.otherParams,"linkNoDataTime",t)},expression:"formPass.otherParams.linkNoDataTime"}}),e._v("\n       超过该时间，端口将重新关闭、打开（>=60）\n    ")],1)],1):e._e(),e._v(" "),a("el-row",{staticClass:"params-dialog-row"},[a("el-checkbox",{staticStyle:{"margin-bottom":"10px"},model:{value:e.formPass.otherParams.faultDiagnosis,callback:function(t){e.$set(e.formPass.otherParams,"faultDiagnosis",t)},expression:"formPass.otherParams.faultDiagnosis"}},[e._v("启用故障诊断")]),e._v(" "),a("div",{staticClass:"params-dialog-row-div"},[e._v("\n      端口无接收数据时间（秒）\n      "),a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!e.formPass.otherParams.faultDiagnosis},model:{value:e.formPass.otherParams.faultNoDataTime,callback:function(t){e.$set(e.formPass.otherParams,"faultNoDataTime",t)},expression:"formPass.otherParams.faultNoDataTime"}}),e._v("\n       超过该时间，"+e._s(e.id&&"1"===e.id.slice(0,1)?"端口为":"进入")+"故障状态（设定值>="+e._s(e.id&&"1"===e.id.slice(0,1)?"5秒":"120秒")+"）\n      "),e.id&&"2"===e.id.slice(0,1)?a("div",{staticStyle:{margin:"10px 0"}},[e._v("\n        故障处理模式：\n        "),a("el-radio",{attrs:{label:"1",disabled:!e.formPass.otherParams.faultDiagnosis},model:{value:e.formPass.otherParams.faultShooting,callback:function(t){e.$set(e.formPass.otherParams,"faultShooting",t)},expression:"formPass.otherParams.faultShooting"}},[e._v("端口将重新关闭、打开")]),e._v(" "),a("el-radio",{attrs:{label:"2",disabled:!e.formPass.otherParams.faultDiagnosis},model:{value:e.formPass.otherParams.faultShooting,callback:function(t){e.$set(e.formPass.otherParams,"faultShooting",t)},expression:"formPass.otherParams.faultShooting"}},[e._v("重启系统")])],1):e._e()],1)],1),e._v(" "),e.id&&"1"===e.id.slice(0,1)?a("el-row",{staticClass:"params-dialog-row"},[e._v("\n    设备间数据包扫描方：\n    "),a("div",{staticClass:"params-dialog-row-div",staticStyle:{"margin-top":"10px"}},[a("el-radio",{attrs:{label:"1",disabled:""},model:{value:e.formPass.otherParams.packetScanning,callback:function(t){e.$set(e.formPass.otherParams,"packetScanning",t)},expression:"formPass.otherParams.packetScanning"}},[e._v("扫面完一个包后，立刻进入下一个设备")]),e._v(" "),a("el-radio",{attrs:{label:"2",disabled:""},model:{value:e.formPass.otherParams.packetScanning,callback:function(t){e.$set(e.formPass.otherParams,"packetScanning",t)},expression:"formPass.otherParams.packetScanning"}},[e._v("设备所有包扫描完后，再进入下一个设备")])],1)]):e._e(),e._v(" "),e.id&&"1"===e.id.slice(0,1)?a("el-row",{staticClass:"params-dialog-row"},[a("el-checkbox",{model:{value:e.formPass.otherParams.alternatePass,callback:function(t){e.$set(e.formPass.otherParams,"alternatePass",t)},expression:"formPass.otherParams.alternatePass"}},[e._v("启用备用通道")])],1):e._e(),e._v(" "),e.id&&"1"===e.id.slice(0,1)&&e.formPass.otherParams.alternatePass?a("div",[a("el-row",{staticClass:"params-dialog-row"},[a("el-col",[e._v("\n        通道类型：\n        "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.otherParams.passType,callback:function(t){e.$set(e.formPass.otherParams,"passType",t)},expression:"formPass.otherParams.passType"}},e._l(e.passTypeList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),"串口"===e.formPass.otherParams.passType?a("el-row",{staticClass:"params-dialog-row",attrs:{gutter:20}},[a("el-col",{staticClass:"params-dialog-row-select",attrs:{span:8}},[e._v("\n        串口：\n        "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.otherParams.sata,callback:function(t){e.$set(e.formPass.otherParams,"sata",t)},expression:"formPass.otherParams.sata"}},e._l(e.sataList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-col",{staticClass:"params-dialog-row-select",attrs:{span:8}},[e._v("\n        波特率：\n        "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.otherParams.baudRate,callback:function(t){e.$set(e.formPass.otherParams,"baudRate",t)},expression:"formPass.otherParams.baudRate"}},e._l(e.baudList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-col",{staticClass:"params-dialog-row-select",attrs:{span:8}},[e._v("\n        数据位：\n        "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.otherParams.dataBits,callback:function(t){e.$set(e.formPass.otherParams,"dataBits",t)},expression:"formPass.otherParams.dataBits"}},e._l(e.dataList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n        校验位：\n        "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.otherParams.checkBits,callback:function(t){e.$set(e.formPass.otherParams,"checkBits",t)},expression:"formPass.otherParams.checkBits"}},e._l(e.checkList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n        停止位：\n        "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.otherParams.stopBits,callback:function(t){e.$set(e.formPass.otherParams,"stopBits",t)},expression:"formPass.otherParams.stopBits"}},e._l(e.stopList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1):e._e(),e._v(" "),"串口"!==e.formPass.otherParams.passType&&"虚拟端口"!==e.formPass.otherParams.passType?a("el-row",{staticClass:"params-dialog-row",attrs:{gutter:20}},[a("el-col",[e._v("\n        "+e._s("TCP客户端"===e.formPass.otherParams.passType?"远程IP：":"本地IP：")+"\n        "),a("el-input",{staticStyle:{width:"150px","margin-right":"10px"},model:{value:e.formPass.otherParams.ip,callback:function(t){e.$set(e.formPass.otherParams,"ip",t)},expression:"formPass.otherParams.ip"}}),e._v("\n        "+e._s("TCP客户端"===e.formPass.otherParams.passType?"远程端口：":"本地端口：")+"\n        "),a("el-input",{staticStyle:{width:"100px","margin-right":"10px"},model:{value:e.formPass.otherParams.port,callback:function(t){e.$set(e.formPass.otherParams,"port",t)},expression:"formPass.otherParams.port"}})],1)],1):e._e()],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1,e.formPass.otherParams=e.paramsOrg}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var D=a("VU/8")(y,_,!1,function(e){a("UNiF")},"data-v-e7610b64",null).exports,P={props:{id:{type:String},formEquipment:{type:Object}},data:function(){return{dialogVisible:!1,dataProcessList:["保持之前值，质量戳为GOOD","保持之前值，质量戳为BAD","设备数据全部置0，质量戳为GOOD","设备数据全部置0，质量戳为BAD"],scanProcessList:["正常扫描","停止扫描，进入鼓掌查询周期"]}},methods:{setParams:function(){this.dialogVisible=!0,this.paramsOrg=JSON.parse(n()(this.formEquipment.otherParams))}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"params-dialog",attrs:{title:"采集设备 其他参数",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-row",{staticClass:"params-dialog-row"},[e._v("\n    查询等待时间（毫秒）：\n    "),a("el-input",{staticStyle:{width:"100px"},model:{value:e.formEquipment.otherParams.delayTime,callback:function(t){e.$set(e.formEquipment.otherParams,"delayTime",t)},expression:"formEquipment.otherParams.delayTime"}})],1),e._v(" "),a("el-row",{staticClass:"params-dialog-row"},[a("el-checkbox",{model:{value:e.formEquipment.otherParams.failedTryAgain,callback:function(t){e.$set(e.formEquipment.otherParams,"failedTryAgain",t)},expression:"formEquipment.otherParams.failedTryAgain"}},[e._v("启用查询失败重试机制")]),e._v(" "),a("div",{staticClass:"params-dialog-row-div"},[e._v("\n      查询失败后再次重试次数 \n      "),a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!e.formEquipment.otherParams.failedTryAgain},model:{value:e.formEquipment.otherParams.failedTryTimes,callback:function(t){e.$set(e.formEquipment.otherParams,"failedTryTimes",t)},expression:"formEquipment.otherParams.failedTryTimes"}})],1)],1),e._v(" "),a("el-row",{staticClass:"params-dialog-row"},[a("el-checkbox",{staticStyle:{"margin-bottom":"10px"},model:{value:e.formEquipment.otherParams.faultDiagnosis,callback:function(t){e.$set(e.formEquipment.otherParams,"faultDiagnosis",t)},expression:"formEquipment.otherParams.faultDiagnosis"}},[e._v("启用故障诊断")]),e._v(" "),a("div",{staticClass:"params-dialog-row-div"},[e._v("\n      引起故障的原因\n      "),a("div",{staticClass:"params-dialog-row-div"},[e._v("\n        连续查询失败次数（包含第一次查询）\n        "),a("el-input",{staticStyle:{width:"100px",margin:"5px 0"},attrs:{disabled:!e.formEquipment.otherParams.faultDiagnosis},model:{value:e.formEquipment.otherParams.continuousQueryFailed,callback:function(t){e.$set(e.formEquipment.otherParams,"continuousQueryFailed",t)},expression:"formEquipment.otherParams.continuousQueryFailed"}})],1),e._v(" "),a("div",{staticClass:"params-dialog-row-div"},[e._v("\n        设备长时间未接收完整帧时间 \n        "),a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!e.formEquipment.otherParams.faultDiagnosis},model:{value:e.formEquipment.otherParams.noReceivedLongTime,callback:function(t){e.$set(e.formEquipment.otherParams,"noReceivedLongTime",t)},expression:"formEquipment.otherParams.noReceivedLongTime"}}),e._v("\n        （设定值>=30秒）\n      ")],1)]),e._v(" "),a("div",{staticClass:"params-dialog-row-div"},[e._v("\n      故障时数据处理方 \n      "),a("el-select",{staticStyle:{margin:"5px 0",width:"280px"},attrs:{placeholder:"请选择",disabled:!e.formEquipment.otherParams.faultDiagnosis},model:{value:e.formEquipment.otherParams.faultDataProcess,callback:function(t){e.$set(e.formEquipment.otherParams,"faultDataProcess",t)},expression:"formEquipment.otherParams.faultDataProcess"}},e._l(e.dataProcessList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("div",{staticClass:"params-dialog-row-div"},[e._v("\n      故障时数据扫描方 \n      "),a("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"请选择",disabled:!e.formEquipment.otherParams.faultDiagnosis},model:{value:e.formEquipment.otherParams.faultScanProcess,callback:function(t){e.$set(e.formEquipment.otherParams,"faultScanProcess",t)},expression:"formEquipment.otherParams.faultScanProcess"}},e._l(e.scanProcessList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1),e._v("\n       查询周期（秒）\n      "),a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!e.formEquipment.otherParams.faultDiagnosis||"正常扫描"===e.formEquipment.otherParams.faultScanProcess},model:{value:e.formEquipment.otherParams.queryPeriod,callback:function(t){e.$set(e.formEquipment.otherParams,"queryPeriod",t)},expression:"formEquipment.otherParams.queryPeriod"}})],1)],1),e._v(" "),a("el-row",{staticClass:"params-dialog-row"},[a("el-checkbox",{staticStyle:{"margin-right":"20px"},model:{value:e.formEquipment.otherParams.equipmentFactor,callback:function(t){e.$set(e.formEquipment.otherParams,"equipmentFactor",t)},expression:"formEquipment.otherParams.equipmentFactor"}},[e._v("使用设备系数")]),e._v("\n     设备层系数R1 \n    "),a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!e.formEquipment.otherParams.equipmentFactor},model:{value:e.formEquipment.otherParams.factorR1,callback:function(t){e.$set(e.formEquipment.otherParams,"factorR1",t)},expression:"formEquipment.otherParams.factorR1"}}),e._v("\n     设备层系数R2 \n    "),a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!e.formEquipment.otherParams.equipmentFactor},model:{value:e.formEquipment.otherParams.factorR2,callback:function(t){e.$set(e.formEquipment.otherParams,"factorR2",t)},expression:"formEquipment.otherParams.factorR2"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1,e.formEquipment.otherParams=e.paramsOrg}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var T=a("VU/8")(P,x,!1,function(e){a("65ra")},"data-v-0f75b247",null).exports,k=(a("lHA8"),a("c/Tr"),a("fZjL")),C=a.n(k),w=a("pFYg"),S=a.n(w);function L(e,t){if(0===arguments.length||!e)return null;var a=t||"{y}-{m}-{d} {h}:{i}:{s}",i=void 0;"object"===(void 0===e?"undefined":S()(e))?i=e:("string"==typeof e&&(e=/^[0-9]+$/.test(e)?parseInt(e):e.replace(new RegExp(/-/gm),"/")),"number"==typeof e&&10===e.toString().length&&(e*=1e3),i=new Date(e));var s={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()};return a.replace(/{([ymdhisa])+}/g,function(e,t){var a=s[t];return"a"===t?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")})}var q=[{text:"采集服务",icon:"fa fa-folder",id:"1",level:1,selected:!0,opened:!0,children:[]},{text:"数据服务",icon:"fa fa-database",id:"2",level:1,opened:!0,selected:!1,children:[]}],E=[{text:"工程组列表",icon:"fa fa-folder",id:"root",level:1,children:[{text:"工程组1",describe:"第一工程组",creatTime:"2020-06-20 18:25:20",icon:"fa fa-laptop",id:"group-1",level:2,children:[{text:"采集器工程1",describe:"第一工程",icon:"fa fa-edit",id:"factory-1",selected:!0,level:3,treeData:[{text:"采集服务",icon:"fa fa-folder",id:"1",level:1,selected:!0,children:[{text:"C1[通道1]",icon:"fa fa-laptop",id:"1-1",level:2,children:[{text:"D1[设备1]",icon:"fa fa-edit",id:"1-1-1",level:3},{text:"D2[设备2]",icon:"fa fa-edit",id:"1-1-2",level:3}]},{text:"C2[通道2]",icon:"fa fa-laptop",id:"1-2",level:2,children:[{text:"D3[设备3]",icon:"fa fa-edit",id:"1-2-1",level:3},{text:"D4[设备4]",icon:"fa fa-edit",id:"1-2-2",level:3}]}]},{text:"数据服务",icon:"fa fa-database",id:"2",level:1,children:[{text:"C3[通道3]",icon:"fa fa-laptop",id:"2-1",level:2}]}],parentId:"group-1"},{text:"采集器工程2",describe:"第二工程",icon:"fa fa-edit",id:"factory-2",level:3,treeData:q,parentId:"group-1"}]},{text:"工程组2",describe:"第二工程组",creatTime:"2020-08-25 18:25:20",icon:"fa fa-laptop",id:"group-2",level:2,children:[]}]}],$={components:{LeftTree:h},props:{factoryData:{type:Array,default:function(){return[]}},idFactory:{type:String},passList:{type:Array},equipmentList:{type:Array}},data:function(){return{dialogVisible:!1,dialogManageVisible:!1,dialogManageTitle:"",level:3,id:null,dialogType:"",handleType:"",formGroup:{text:"",describe:"",creatTime:""},formGroupOrg:{},formFactory:{text:"",describe:""},formFactoryOrg:{},submitLoading:!1}},methods:{factoryManage:function(){this.dialogVisible=!0,this.getSelectedFactory(this.idFactory)},getSelectedFactory:function(e){var t=this;this.factoryData[0].selected=!1,null===e&&this.refreshSelect(),this.factoryData[0].children.forEach(function(a){a.selected=!1,a.children.forEach(function(a){a.selected=!1,a.id===e&&(a.selected=!0),t.level=3,t.id=e,t.formFactoryOrg=a})})},itemClick:function(e){var t=e.id,a=e.level;this.id=t,this.level=a,2===this.level&&(this.formGroupOrg=e),3===this.level&&(this.formFactoryOrg=e),this.$emit("factory-select",e)},newBuild:function(){var e=this;this.dialogManageVisible=!0,this.handleType="insert",this.dialogManageTitle="新建"+(1===this.level?"项目组":"采集工程"),this.dialogType=1===this.level?"group":"factory",this.$nextTick(function(){1===e.level&&e.$refs.formGroup.resetFields(),2===e.level&&e.$refs.formFactory.resetFields(),e.formGroup.creatTime=L(new Date)})},editFactory:function(){var e=this;this.dialogManageVisible=!0,this.handleType="edit",this.dialogManageTitle="修改"+(2===this.level?"项目组":"采集工程"),this.dialogType=2===this.level?"group":"factory",this.$nextTick(function(){2===e.level&&(e.formGroup=JSON.parse(n()(e.formGroupOrg))),3===e.level&&(e.formFactory=JSON.parse(n()(e.formFactoryOrg)))})},submit:function(){var e=this,t="group"===this.dialogType?JSON.parse(n()(this.formGroup)):JSON.parse(n()(this.formFactory));switch(this.submitLoading=!0,this.handleType){case"insert":t.id=Math.random().toString(36).substr(-10),t.icon="group"===this.dialogType?"fa fa-laptop":"fa fa-edit",t.level="group"===this.dialogType?2:3,t.selected=!1,t.opened=!0,"group"===this.dialogType?(t.children=[],this.factoryData[0].children.push(t)):(t.treeData=JSON.parse(n()(q)),t.parentId=this.id,this.factoryData[0].children.forEach(function(a,i){e.id===a.id&&a.children.push(t)})),this.submitLoading=!1,this.dialogManageVisible=!1;break;case"edit":this.factoryData[0].children.forEach(function(a,i){"group"===e.dialogType&&t.id===a.id&&e.$set(e.factoryData[0].children,i,JSON.parse(n()(t))),"factory"===e.dialogType&&a.children.forEach(function(i,s){t.id===i.id&&e.$set(a.children,s,JSON.parse(n()(t)))})}),this.submitLoading=!1,this.dialogManageVisible=!1}this.getSelectedFactory("root"),this.refreshSelect()},refreshSelect:function(){var e=this;this.$nextTick(function(){e.level=1,e.id="root",e.$set(e.factoryData[0],"selected",!0)})},itemDelete:function(){var e=this;this.$confirm("将删除该"+(2===this.level?"工程组":"工程")+", 是否继续?","提示",{type:"warning"}).then(function(){if(e.factoryData[0].children.forEach(function(t,a){2===e.level&&e.id===t.id&&e.factoryData[0].children.splice(a,1),3===e.level&&t.children.forEach(function(a,i){e.id===a.id&&t.children.splice(i,1)})}),0===e.factoryData[0].children.length||e.factoryData[0].children.every(function(e){return e&&0===e.children.length}))e.$emit("factory-select",{level:3,id:null,treeData:[]}),e.refreshSelect();else if(e.factoryData[0].children.some(function(e){return e&&0!==e.children.length})){var t=!0;e.factoryData[0].children.forEach(function(a,i){t&&a&&0!==a.children.length&&(e.level=3,e.id=a.children[0].id,e.$set(a.children[0],"selected",!0),e.$emit("factory-select",{level:3,id:a.children[0].id,parentId:a.children[0].parentId,treeData:a.children[0].treeData}),t=!1)})}}).catch(function(){})}}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"factory-manage",attrs:{title:"工程管理",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"small",type:"primary",disabled:3===e.level},on:{click:e.newBuild}},[e._v("新建")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"success",disabled:1===e.level},on:{click:e.editFactory}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger",disabled:1===e.level},on:{click:e.itemDelete}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"info"}},[e._v("加载")])],1),e._v(" "),a("left-tree",{staticClass:"left-panel-tree",attrs:{data:e.factoryData,id:e.id,contextmenu:!1},on:{"item-click":e.itemClick}})],1),e._v(" "),a("el-dialog",{staticClass:"factory-operate",attrs:{title:e.dialogManageTitle,visible:e.dialogManageVisible},on:{"update:visible":function(t){e.dialogManageVisible=t}}},[1===e.level||2===e.level&&"edit"===e.handleType?a("el-form",{ref:"formGroup",attrs:{model:e.formGroup,"label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{prop:"text",label:"项目组名："}},[a("el-input",{model:{value:e.formGroup.text,callback:function(t){e.$set(e.formGroup,"text",t)},expression:"formGroup.text"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"describe",label:"项目组描述："}},[a("el-input",{model:{value:e.formGroup.describe,callback:function(t){e.$set(e.formGroup,"describe",t)},expression:"formGroup.describe"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"creatTime",label:"创建时间："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formGroup.creatTime,callback:function(t){e.$set(e.formGroup,"creatTime",t)},expression:"formGroup.creatTime"}})],1)],1):e._e(),e._v(" "),3===e.level||2===e.level&&"insert"===e.handleType?a("el-form",{ref:"formFactory",attrs:{model:e.formFactory,"label-width":"90px","label-position":"right"}},[a("el-form-item",{attrs:{prop:"text",label:"工程名："}},[a("el-input",{model:{value:e.formFactory.text,callback:function(t){e.$set(e.formFactory,"text",t)},expression:"formFactory.text"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"describe",label:"工程描述："}},[a("el-input",{model:{value:e.formFactory.describe,callback:function(t){e.$set(e.formFactory,"describe",t)},expression:"formFactory.describe"}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogManageVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var O={components:{PluginSelect:v,PassParams:D,EquipmentParams:T,FactoryManage:a("VU/8")($,I,!1,function(e){a("o8i/")},"data-v-3e7cbd14",null).exports},props:{treeData:{type:Array},factoryData:{type:Array},handleType:{type:String,default:""},level:{type:Number,default:3},id:{type:String},idFactory:{type:String},passList:{type:Array},pluginList:{type:Array},passTypeList:{type:Array},sataList:{type:Array},baudList:{type:Array},dataList:{type:Array},checkList:{type:Array},stopList:{type:Array},equipmentList:{type:Array}},data:function(){return{dialogDisposeVisible:!1,dialogDisposeTitle:"",dialogCopyTitle:"",dialogCopyVisible:!1,dialogCopyData:[],multipleSelection:[],bindingIPVisible:!1,formPass:{otherParams:{},plugin:{}},disposeActiveNames:["1"],formEquipment:{otherParams:{}},activeNames:["1","2","3"]}},watch:{handleType:function(e){}},methods:{newBuild:function(e){this.dialogDisposeVisible=!0,this.dialogDisposeTitle="采集"+(1===this.level?"通道":"设备")+"配置",1===this.level?this.formPass={passName:"C1",passDescribe:"通道1",plugin:{name:"IND_MODBUS_TCP",describe:"MODBUS TCP",factory:"莫迪康",classification:"通用标准",path:"C:\\Users\\43577\\Desktop\\软件\\CESTC\\PluginIo\\IND_MODBUS_RTU",plugins:[{name:"BA_BACNET_IP.335x",platform:"335x",edition:"5.0.0.1",lastModifiedDate:"2017-11-08 07:55:30"},{name:"BA_BACNET_IP.dll",platform:"dll",edition:"5.0.0.1",lastModifiedDate:"2019-02-19 03:45:30"},{name:"BA_BACNET_IP.xt",platform:"xt",edition:"",lastModifiedDate:"2020-02-22 08:47:32"}]},passType:"串口",sata:"COM01",baudRate:"9600",dataBits:"8",checkBits:"无校验",stopBits:"1",ip:"192.168.0.253",port:"50001",bindingIp:"192.168.200.161",otherParams:{scanDelay:!1,delayTime:100,linkReset:!1,linkNoDataTime:60,faultDiagnosis:!1,faultNoDataTime:60,faultShooting:"1",packetScanning:"1",alternatePass:!1,passType:"串口",sata:"COM01",baudRate:"9600",dataBits:"8",checkBits:"无校验",stopBits:"1",ip:"192.168.0.253",port:"50001"},delayTime:10,dataTags:[]}:this.formEquipment={equipmentName:"D1",equipmentDescribe:"设备1",userParam:"",MODBUSAdd:"1",searchNum:32,singleRegister:!0,multiRegister:!0,correspondingValue:"FF00",subCorrespondingValue:"0000",doubleByteCheck:!0,otherParams:{delayTime:3e3,failedTryAgain:!1,failedTryTimes:1,faultDiagnosis:!1,continuousQueryFailed:5,noReceivedLongTime:120,faultDataProcess:"保持之前值，质量戳为GOOD",faultScanProcess:"正常扫描",queryPeriod:30,equipmentFactor:!1,factorR1:"1.000",factorR2:"1.000"},dataTags:[]}},itemAdd:function(){this.$emit("item-add",1===this.level?this.formPass:this.formEquipment),this.dialogDisposeVisible=!1},copyItems:function(){var e=this;this.dialogCopyVisible=!0,this.dialogCopyTitle=(1===this.level?"通道":"设备")+"复制（采集）-创建多个"+(1===this.level?"通道":"设备");var t=[],a=[];this.treeData.forEach(function(i){i.children.forEach(function(s){i.id===e.id&&e.passList.forEach(function(e){s.id===e.id&&t.push(e)}),s.id===e.id&&s.children.forEach(function(t){e.equipmentList.forEach(function(e){t.id===e.id&&a.push(e)})})})}),this.dialogCopyData=1===this.level?t:a},handleSelectionChange:function(e){this.multipleSelection=e},multipleSubmit:function(e){"cancel"===e?(this.$refs.multipleTable.clearSelection(),this.dialogCopyVisible=!1):(this.$emit("items-copy",this.multipleSelection),this.dialogCopyVisible=!1)},itemDelete:function(){this.$emit("item-delete",this.formPass)},setParamsPass:function(){this.$refs.passParams.setParams()},pluginSelect:function(){this.$refs.pluginSelect.pluginSelect()},pluginClick:function(e){2===e.level&&(this.formPass.plugin=e),console.log(this.formPass)},setParamsEquipment:function(){this.$refs.equipmentParams.setParams()},factoryManage:function(){this.$refs.factoryManage.factoryManage()},factorySelect:function(e){this.$emit("factory-select",e)},bindingIP:function(){this.bindingIPVisible=!0,this.bindingIpOrg=JSON.parse(n()(this.formPass.bindingIp))}}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"primary",disabled:3===e.level},on:{click:e.newBuild}},[e._v("新建")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-close",type:"danger",disabled:1===e.level},on:{click:e.itemDelete}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-caret-right"}},[e._v("本地运行")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-suitcase"},on:{click:e.factoryManage}},[e._v("工程管理")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-data-board"}},[e._v("远程监视")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-download",type:"info"}},[e._v("上传下载")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-check",type:"success"}},[e._v("保存")])],1),e._v(" "),a("el-dialog",{staticClass:"dispose-dialog",attrs:{title:e.dialogDisposeTitle,visible:e.dialogDisposeVisible},on:{"update:visible":function(t){e.dialogDisposeVisible=t}}},[1===e.level?a("el-form",{attrs:{model:e.formPass,"label-position":"left"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"95px",label:"名称(英文)：",prop:"passName"}},[a("el-input",{model:{value:e.formPass.passName,callback:function(t){e.$set(e.formPass,"passName",t)},expression:"formPass.passName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"55px",label:"描述：",prop:"passDescribe"}},[a("el-input",{model:{value:e.formPass.passDescribe,callback:function(t){e.$set(e.formPass,"passDescribe",t)},expression:"formPass.passDescribe"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{margin:"0 0 20px 5px"},on:{click:e.setParamsPass}},[e._v("其他参数")])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"55px",label:"厂家："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formPass.plugin.factory,callback:function(t){e.$set(e.formPass.plugin,"factory",t)},expression:"formPass.plugin.factory"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"55px",label:"描述："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formPass.plugin.describe,callback:function(t){e.$set(e.formPass.plugin,"describe",t)},expression:"formPass.plugin.describe"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{margin:"0 0 20px 5px"},on:{click:e.pluginSelect}},[e._v("选择插件")]),e._v(" "),a("el-button",{staticStyle:{"margin-bottom":"20px"}},[e._v("帮助")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{"label-width":"55px",label:"路径："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formPass.plugin.path,callback:function(t){e.$set(e.formPass.plugin,"path",t)},expression:"formPass.plugin.path"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{"label-width":"85px",label:"通道类型：",prop:"passType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.passType,callback:function(t){e.$set(e.formPass,"passType",t)},expression:"formPass.passType"}},e._l(e.passTypeList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1)],1),e._v(" "),"串口"===e.formPass.passType?a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{width:"180px"}},[a("el-form-item",{attrs:{"label-width":"55px",label:"串口：",prop:"sata"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.sata,callback:function(t){e.$set(e.formPass,"sata",t)},expression:"formPass.sata"}},e._l(e.sataList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"180px"}},[a("el-form-item",{attrs:{"label-width":"75px",label:"波特率：",prop:"baudRate"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.baudRate,callback:function(t){e.$set(e.formPass,"baudRate",t)},expression:"formPass.baudRate"}},e._l(e.baudList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"160px"}},[a("el-form-item",{attrs:{"label-width":"75px",label:"数据位：",prop:"dataBits"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.dataBits,callback:function(t){e.$set(e.formPass,"dataBits",t)},expression:"formPass.dataBits"}},e._l(e.dataList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"200px"}},[a("el-form-item",{attrs:{"label-width":"75px",label:"校验位：",prop:"checkBits"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.checkBits,callback:function(t){e.$set(e.formPass,"checkBits",t)},expression:"formPass.checkBits"}},e._l(e.checkList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"180px"}},[a("el-form-item",{attrs:{"label-width":"75px",label:"停止位：",prop:"stopBits"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.stopBits,callback:function(t){e.$set(e.formPass,"stopBits",t)},expression:"formPass.stopBits"}},e._l(e.stopList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1)],1):e._e(),e._v(" "),"串口"!==e.formPass.passType&&"虚拟端口"!==e.formPass.passType?a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{width:"300px"}},[a("el-form-item",{attrs:{"label-width":"70px",label:"TCP客户端"===e.formPass.passType?"远程IP：":"本地IP：",prop:"ip"}},[a("el-input",{model:{value:e.formPass.ip,callback:function(t){e.$set(e.formPass,"ip",t)},expression:"formPass.ip"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"300px"}},[a("el-form-item",{attrs:{"label-width":"85px",label:"TCP客户端"===e.formPass.passType?"远程端口：":"本地端口：",prop:"port"}},[a("el-input",{model:{value:e.formPass.port,callback:function(t){e.$set(e.formPass,"port",t)},expression:"formPass.port"}})],1)],1),e._v(" "),"TCP客户端"===e.formPass.passType?a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:e.bindingIP}},[e._v("需要绑定本地IP")]):e._e()],1):e._e(),e._v(" "),e.id&&"2"===e.id.slice(0,1)?a("el-collapse",{model:{value:e.disposeActiveNames,callback:function(t){e.disposeActiveNames=t},expression:"disposeActiveNames"}},[a("el-collapse-item",{attrs:{title:"基本参数",name:"1"}},[a("div",{staticClass:"collapse-content"},[e._v("延迟回复（秒）：\n            "),a("el-input",{staticStyle:{"max-width":"400px"},model:{value:e.formPass.delayTime,callback:function(t){e.$set(e.formPass,"delayTime",t)},expression:"formPass.delayTime"}})],1)])],1):e._e()],1):e._e(),e._v(" "),2===e.level?a("el-form",{attrs:{model:e.formEquipment,"label-position":"left"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"95px",label:"名称(英文)：",prop:"equipmentName"}},[a("el-input",{model:{value:e.formEquipment.equipmentName,callback:function(t){e.$set(e.formEquipment,"equipmentName",t)},expression:"formEquipment.equipmentName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"55px",label:"描述：",prop:"equipmentDescribe"}},[a("el-input",{model:{value:e.formEquipment.equipmentDescribe,callback:function(t){e.$set(e.formEquipment,"equipmentDescribe",t)},expression:"formEquipment.equipmentDescribe"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{margin:"0 0 20px 5px"},on:{click:e.setParamsEquipment}},[e._v("其他参数")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"125px",label:"用户参数(如:型)：",prop:"userParam"}},[a("el-input",{model:{value:e.formEquipment.userParam,callback:function(t){e.$set(e.formEquipment,"userParam",t)},expression:"formEquipment.userParam"}})],1)],1)],1),e._v(" "),a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"基本参数",name:"1"}},[a("div",{staticClass:"collapse-content"},[e._v("MODBUS设备地址：\n            "),a("el-input",{staticStyle:{"max-width":"400px"},model:{value:e.formEquipment.MODBUSAdd,callback:function(t){e.$set(e.formEquipment,"MODBUSAdd",t)},expression:"formEquipment.MODBUSAdd"}})],1),e._v(" "),a("div",[e._v("查询帧查询的最大字数：\n            "),a("el-input",{staticStyle:{"max-width":"400px"},model:{value:e.formEquipment.searchNum,callback:function(t){e.$set(e.formEquipment,"searchNum",t)},expression:"formEquipment.searchNum"}})],1)]),e._v(" "),a("el-collapse-item",{attrs:{title:"写寄存器",name:"2"}},[a("div",{staticClass:"collapse-content"},[e._v("单寄存器写是否按6号指令？\n            "),a("el-radio",{attrs:{label:!0},model:{value:e.formEquipment.singleRegister,callback:function(t){e.$set(e.formEquipment,"singleRegister",t)},expression:"formEquipment.singleRegister"}},[e._v("YES")]),e._v(" "),a("el-radio",{attrs:{label:!1},model:{value:e.formEquipment.singleRegister,callback:function(t){e.$set(e.formEquipment,"singleRegister",t)},expression:"formEquipment.singleRegister"}},[e._v("NO")])],1),e._v(" "),a("div",[e._v("多寄存器写是否按16号指令？\n            "),a("el-radio",{attrs:{label:!0},model:{value:e.formEquipment.multiRegister,callback:function(t){e.$set(e.formEquipment,"multiRegister",t)},expression:"formEquipment.multiRegister"}},[e._v("YES")]),e._v(" "),a("el-radio",{attrs:{label:!1},model:{value:e.formEquipment.multiRegister,callback:function(t){e.$set(e.formEquipment,"multiRegister",t)},expression:"formEquipment.multiRegister"}},[e._v("NO")])],1)]),e._v(" "),a("el-collapse-item",{attrs:{title:"高级参数",name:"3"}},[a("div",{staticClass:"collapse-content"},[e._v("合对应的值：\n            "),a("el-input",{staticStyle:{"max-width":"400px"},model:{value:e.formEquipment.correspondingValue,callback:function(t){e.$set(e.formEquipment,"correspondingValue",t)},expression:"formEquipment.correspondingValue"}})],1),e._v(" "),a("div",{staticClass:"collapse-content"},[e._v("分对应的值：\n            "),a("el-input",{staticStyle:{"max-width":"400px"},model:{value:e.formEquipment.subCorrespondingValue,callback:function(t){e.$set(e.formEquipment,"subCorrespondingValue",t)},expression:"formEquipment.subCorrespondingValue"}})],1),e._v(" "),a("div",[e._v("双字节校验CRC传送顺序，先低后高？\n            "),a("el-radio",{attrs:{label:!0},model:{value:e.formEquipment.doubleByteCheck,callback:function(t){e.$set(e.formEquipment,"doubleByteCheck",t)},expression:"formEquipment.doubleByteCheck"}},[e._v("YES")]),e._v(" "),a("el-radio",{attrs:{label:!1},model:{value:e.formEquipment.doubleByteCheck,callback:function(t){e.$set(e.formEquipment,"doubleByteCheck",t)},expression:"formEquipment.doubleByteCheck"}},[e._v("NO")])],1)])],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogDisposeVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.itemAdd}},[e._v("确 定")])],1)],1),e._v(" "),a("pass-params",{ref:"passParams",attrs:{id:e.id,"form-pass":e.formPass,"pass-type-list":e.passTypeList,"sata-list":e.sataList,"baud-list":e.baudList,"data-list":e.dataList,"check-list":e.checkList,"stop-list":e.stopList}}),e._v(" "),a("equipment-params",{ref:"equipmentParams",attrs:{id:e.id,"form-equipment":e.formEquipment}}),e._v(" "),a("plugin-select",{ref:"pluginSelect",attrs:{id:e.id,"form-pass":e.formPass,"plugin-list":e.pluginList},on:{"plugin-click":e.pluginClick}}),e._v(" "),a("el-dialog",{staticClass:"copy-dialog",attrs:{title:e.dialogCopyTitle,visible:e.dialogCopyVisible},on:{"update:visible":function(t){e.dialogCopyVisible=t}}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.dialogCopyData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:1===e.level?"passName":"equipmentName",label:"对象名称",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:1===e.level?"passDescribe":"equipmentDescribe",label:"对象描述"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.multipleSubmit("cancel")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.multipleSubmit("submit")}}},[e._v("确 定")])],1)],1),e._v(" "),a("factory-manage",{ref:"factoryManage",attrs:{"id-factory":e.idFactory,"factory-data":e.factoryData,"pass-list":e.passList,"equipment-list":e.equipmentList},on:{"factory-select":e.factorySelect}}),e._v(" "),a("el-dialog",{staticClass:"bind-dialog",attrs:{title:"IP地址框",visible:e.bindingIPVisible},on:{"update:visible":function(t){e.bindingIPVisible=t}}},[a("el-row",[e._v("\n      本地IP：\n      "),a("el-input",{staticStyle:{width:"300px"},model:{value:e.formPass.bindingIp,callback:function(t){e.$set(e.formPass,"bindingIp",t)},expression:"formPass.bindingIp"}})],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[e._v("\n      注：本地IP，主要用来网卡绑定，以方便使用固定路由，为空的话，系统自己匹配路由。\n    ")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.bindingIPVisible=!1,e.formPass.bindingIp=e.bindingIpOrg}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.bindingIPVisible=!1}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var A=a("VU/8")(O,N,!1,function(e){a("kKoi")},"data-v-1cc890d9",null).exports,B={props:{factoryData:{type:Array,default:function(){return[]}},serviceData:{type:Object,default:function(){}},serviceId:{type:String},passList:{type:Array,default:function(){return[]}},equipmentList:{type:Array,default:function(){return[]}},passTypeList:{type:Array},sataList:{type:Array},baudList:{type:Array},dataList:{type:Array},checkList:{type:Array},stopList:{type:Array}},data:function(){return{formGroup:{groupName:"",projectName:"",editionNum:"",collectTabNum:0},tableGroup:[],tableMaxHeight:0}},created:function(){var e=document.documentElement.clientHeight;this.tableMaxHeight=e-73-40-55-60-40,this.getServiceData()},methods:{getServiceData:function(){var e=this;this.factoryData[0].children.forEach(function(t){t.id===e.serviceData.parentId&&(e.formGroup.groupName=t.text,t.children.forEach(function(t){if(t.id===e.serviceData.id){e.formGroup.projectName=t.text,e.formGroup.editionNum=t.id;var a=0;t.treeData[0].children.forEach(function(t){t.children.forEach(function(t){e.equipmentList.forEach(function(e){t.id===e.id&&(a+=e.dataTags.length)})})}),e.formGroup.collectTabNum=a;var i=JSON.parse(n()(t));i.treeData.forEach(function(t){var a=0;t.children.forEach(function(t){e.passList.forEach(function(a){t.id===a.id&&(t.name=a.passName,t.describe=a.passDescribe,t.params={pluginName:a.plugin.name,passType:a.passType,sata:e.sataList.findIndex(function(e){return e===a.sata}),baudRate:e.baudList.findIndex(function(e){return e===a.baudRate}),dataBits:e.dataList.findIndex(function(e){return e===a.dataBits}),checkBits:e.checkList.findIndex(function(e){return e===a.checkBits}),stopBits:e.stopList.findIndex(function(e){return e===a.stopBits}),ip:a.ip,port:a.port,bindingIp:a.bindingIp})}),t.index=(++a).toString(),1===t.index.length&&(t.index="0"+t.index),t.isPass=!0;var i=0;t.children.forEach(function(t){e.equipmentList.forEach(function(e){t.id===e.id&&(t.name=e.equipmentName,t.describe=e.equipmentDescribe)}),t.index=(++i).toString(),1===t.index.length&&(t.index="0"+t.index)})})}),e.tableGroup=i.treeData[0].children.concat(i.treeData[1].children)}}))})}},watch:{serviceId:function(e){this.getServiceData()}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[null!==e.serviceData.id?a("el-form",{attrs:{model:e.formGroup,"label-position":"right"}},[a("el-row",[a("el-col",{staticStyle:{width:"400px"}},[a("el-form-item",{attrs:{"label-width":"80px",label:"所在组：",prop:"groupName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formGroup.groupName,callback:function(t){e.$set(e.formGroup,"groupName",t)},expression:"formGroup.groupName"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"440px"}},[a("el-form-item",{attrs:{"label-width":"120px",label:"当前工程名称：",prop:"projectName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formGroup.projectName,callback:function(t){e.$set(e.formGroup,"projectName",t)},expression:"formGroup.projectName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticStyle:{width:"400px"}},[a("el-form-item",{attrs:{"label-width":"80px",label:"版本号：",prop:"editionNum"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formGroup.editionNum,callback:function(t){e.$set(e.formGroup,"editionNum",t)},expression:"formGroup.editionNum"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"440px"}},[a("el-form-item",{attrs:{"label-width":"120px",label:"采集标签个数：",prop:"collectTabNum"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formGroup.collectTabNum,callback:function(t){e.$set(e.formGroup,"collectTabNum",t)},expression:"formGroup.collectTabNum"}})],1)],1)],1)],1):e._e(),e._v(" "),null!==e.serviceData.id?a("el-table",{attrs:{data:e.tableGroup,"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},"max-height":e.tableMaxHeight}},[a("el-table-column",{attrs:{label:"序号","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.isPass?"通道":"设备")+"["+e._s(t.row.index)+"]\n      ")]}}],null,!1,703864630)}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称(英文)","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"describe",label:"描述(中文)","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数","min-width":"520"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isPass?a("div",[e._v("\n          "+e._s(t.row.params.pluginName)+";\n          "+e._s(t.row.params.passType)+",\n          "+e._s("串口"===t.row.params.passType?t.row.params.sata:t.row.params.ip)+",\n          "+e._s("串口"===t.row.params.passType?t.row.params.baudRate:t.row.params.port)+",\n          "+e._s("串口"===t.row.params.passType?t.row.params.dataBits:t.row.params.bindingIp)+",\n          "+e._s("串口"===t.row.params.passType?t.row.params.checkBits:"")+",\n          "+e._s("串口"===t.row.params.passType?t.row.params.stopBits:"")+";\n        ")]):a("div",[e._v("\n          temp=;\n        ")])]}}],null,!1,2063392836)})],1):a("div",[e._v("未选中工程")])],1)},staticRenderFns:[]};var R=a("VU/8")(B,F,!1,function(e){a("5iLf")},"data-v-15ffd292",null).exports,V=a("//Fk"),M=a.n(V),G=(a("Gu7T"),function(e,t){return function(a,i){return"asc"===t||void 0===t||""===t?a[e]>i[e]?1:a[e]<i[e]?-1:0:"desc"===t?a[e]<i[e]?1:a[e]>i[e]?-1:0:void 0}}),U=a("uXZL"),J=a.n(U),H=[{prop:"name",label:"名称（英文）",minWidth:120},{prop:"describe",label:"描述（中文）",minWidth:160},{prop:"dataType",label:"数据类型",minWidth:70},{prop:"direction",label:"读写方向",minWidth:70},{prop:"acquisitionCycle",label:"采集周期",minWidth:70},{prop:"IOTag",label:"IO标签链接",minWidth:170},{prop:"slaveStationID",label:"从站ID",minWidth:55},{prop:"registerType",label:"寄存器类型",minWidth:85},{prop:"registerAddr",label:"寄存器地址",minWidth:85},{prop:"dataFormat",label:"数据格式",minWidth:70}],z=[{prop:"name",label:"名称（英文）",minWidth:110},{prop:"describe",label:"描述（中文）",minWidth:140},{prop:"dataType",label:"数据类型",minWidth:70},{prop:"direction",label:"读写方向",minWidth:70},{prop:"acquisitionCycle",label:"采集周期",minWidth:70},{prop:"registerType",label:"寄存器类型",minWidth:85},{prop:"registerAddr",label:"寄存器地址",minWidth:85},{prop:"analyticalMethod",label:"解析方式",minWidth:70},{prop:"displacementDeviation",label:"位移偏量",minWidth:70}],W=["序号","名称（英文）","描述（中文）","数据类型","读写方向","采集周期","IO标签链接","从站ID","寄存器类型","寄存器地址","数据格式"],j=["index","name","describe","dataType","direction","acquisitionCycle","IOTag","slaveStationID","registerType","registerAddr","dataFormat"],X=["序号","名称（英文）","描述（中文）","数据类型","读写方向","采集周期","寄存器类型","寄存器地址","解析方式","位移偏量","按BCD"],Y=["index","name","describe","dataType","direction","acquisitionCycle","registerType","registerAddr","analyticalMethod","displacementDeviation","useBCD"],Q={index:"序号",name:"名称（英文）",describe:"描述（中文）",dataType:"数据类型",direction:"读写方向",acquisitionCycle:"采集周期",IOTag:"IO标签链接",slaveStationID:"从站ID",registerType:"寄存器类型",registerAddr:"寄存器地址",dataFormat:"数据格式",analyticalMethod:"解析方式",displacementDeviation:"位移偏量",useBCD:"按BCD"},K={components:{LeftTree:h},props:{id:{type:String},formData:{type:Object,default:function(){}},treeData:{type:Array,default:function(){return[]}},passList:{type:Array,default:function(){return[]}},equipmentList:{type:Array,default:function(){return[]}},tagDescribe:{type:String}},data:function(){return{dialogVisible:!1,tableData:[]}},methods:{tagSelect:function(){this.dialogVisible=!0,this.getTagTreeData(),this.IOTagOrg=JSON.parse(n()(this.formData.IOTag)),this.IOTagParentIdOrg=this.formData.IOTagParentId?JSON.parse(n()(this.formData.IOTagParentId)):"",this.IOTagSelectIdOrg=this.formData.IOTagSelectId?JSON.parse(n()(this.formData.IOTagSelectId)):""},getTagTreeData:function(){var e=this;this.tagTreeData=JSON.parse(n()(this.treeData)),this.tagTreeData.forEach(function(t){"1"===t.id?(t.text="IO标签",t.tagSelectList=[{name:"_kernal_version",describe:"应用程序内核版本",dataType:"整型",direction:"读写",source:"IO属性",parentId:t.id,id:"0"},{name:"_cpu",describe:"CPU负荷",dataType:"整型",direction:"只读",source:"IO属性",parentId:t.id,id:"1"},{name:"_mem_total",describe:"内存总数(k)",dataType:"整型",direction:"只读",source:"IO属性",parentId:t.id,id:"2"}]):"2"===t.id&&(t.text="系统变量标签",t.children=[]),t.children.forEach(function(t){e.passList.forEach(function(a){t.id===a.id&&(t.tagSelectList=[{name:"_send_byte",describe:"发送字节数(BYTE)",dataType:"整型",direction:"只读",source:"IO属性",passName:a.passName,passDescribe:a.passDescribe,parentId:t.id,id:"0"},{name:"_rev_byte",describe:"接收字节数(BYTE)",dataType:"整型",direction:"只读",source:"IO属性",passName:a.passName,passDescribe:a.passDescribe,parentId:t.id,id:"1"},{name:"_io_status",describe:"通道状态",dataType:"整型",direction:"只读",source:"IO属性",passName:a.passName,passDescribe:a.passDescribe,parentId:t.id,id:"2"}],t.children.forEach(function(t){e.equipmentList.forEach(function(e){t.id===e.id&&(t.tagSelectList=[{name:"_send_package",describe:"发送帧个数",dataType:"整型",direction:"只读",source:"IO属性",passName:a.passName,passDescribe:a.passDescribe,equpimentName:e.equipmentName,equipmentDescribe:e.equipmentDescribe,parentId:t.id,id:"0"},{name:"_rev_package",describe:"接收帧个数",dataType:"整型",direction:"只读",source:"IO属性",passName:a.passName,passDescribe:a.passDescribe,equpimentName:e.equipmentName,equipmentDescribe:e.equipmentDescribe,parentId:t.id,id:"1"},{name:"_success_rate",describe:"通信成功率",dataType:"浮点",direction:"只读",source:"IO属性",passName:a.passName,passDescribe:a.passDescribe,equpimentName:e.equipmentName,equipmentDescribe:e.equipmentDescribe,parentId:t.id,id:"2"},{name:"_io_status",describe:"设备状态",dataType:"布尔",direction:"只读",source:"IO属性",passName:a.passName,passDescribe:a.passDescribe,equpimentName:e.equipmentName,equipmentDescribe:e.equipmentDescribe,parentId:t.id,id:"3"}],e.dataTags.forEach(function(i){t.tagSelectList.push({name:i.name,describe:i.describe,dataType:i.dataType,direction:i.direction,source:"IO采集",passName:a.passName,passDescribe:a.passDescribe,equpimentName:e.equipmentName,equipmentDescribe:e.equipmentDescribe,parentId:t.id,id:i.id})}))})}))})})})},itemClick:function(e){this.tableData=e.tagSelectList},tagClick:function(e){this.$emit("tag-click",e)},visibleSelect:function(e){var t=this;e.selected=!1,e.id===this.formData.IOTagParentId&&(e.selected=!0,this.tableData=e.tagSelectList,this.$nextTick(function(){t.tableData.forEach(function(e,a){e.id===t.formData.IOTagSelectId&&t.$refs.tagListTable.setCurrentRow(t.tableData[a])})}))}},watch:{dialogVisible:function(e){var t=this;!0===e&&this.tagTreeData.forEach(function(e){t.visibleSelect(e),e.children.forEach(function(e){t.visibleSelect(e),e.children.forEach(function(e){t.visibleSelect(e)})})})}}},Z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dialogVisible?a("el-dialog",{staticClass:"tag-select-dialog",attrs:{title:"标签变量字典",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-container",[a("el-aside",{staticClass:"left-panel"},[a("left-tree",{staticClass:"left-panel-tree",attrs:{data:e.tagTreeData,contextmenu:!1,collapse:!1},on:{"item-click":e.itemClick}})],1),e._v(" "),a("el-container",{staticClass:"right-panel is-vertical"},[a("el-form",{attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{"label-width":"55px",label:"名称："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formData.IOTag,callback:function(t){e.$set(e.formData,"IOTag",t)},expression:"formData.IOTag"}})],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"55px",label:"描述："}},[e._v("\n          "+e._s(e.tagDescribe)+"\n        ")]),e._v(" "),a("el-table",{ref:"tagListTable",attrs:{data:e.tableData,height:"350","tooltip-effect":"dark","highlight-current-row":""},on:{"current-change":e.tagClick}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"describe",label:"描述",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataType",label:"类型",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"direction",label:"方向",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"source",label:"来源",width:"70"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1,e.formData.IOTag=e.IOTagOrg,e.formData.IOTagParentId=e.IOTagParentIdOrg,e.formData.IOTagSelectId=e.IOTagSelectIdOrg}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1):e._e()},staticRenderFns:[]};var ee=a("VU/8")(K,Z,!1,function(e){a("ZiLO")},"data-v-638f4476",null).exports,te={props:{id:{type:String},formData:{type:Object,default:function(){}},treeData:{type:Array,default:function(){return[]}},passList:{type:Array,default:function(){return[]}},equipmentList:{type:Array,default:function(){return[]}},dataTags:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,tableData:[],multipleSelection:[],filterForm:{}}},methods:{tagLoad:function(){this.dialogVisible=!0,this.refreshData(),this.filterForm={passDescribe:!0,equipmentDescribe:!0,equipmentStatusTag:!0,floatingPoint:!0,parseInt:!0,boolean:!0,string:!0,binary:!0}},refreshData:function(){var e=this;this.copyTreeData=JSON.parse(n()(this.treeData)),this.copyEquipmentList=JSON.parse(n()(this.equipmentList)),this.copyTreeData.forEach(function(t){"2"===t.id&&(t.children=[]),t.children.forEach(function(t){e.passList.forEach(function(a){t.id===a.id&&t.children.forEach(function(t){e.copyEquipmentList.forEach(function(e){t.id===e.id&&(e.passName=a.passName,e.passDescribe=a.passDescribe)})})})})}),this.tableData=this.copyEquipmentList},handleSelectionChange:function(e){this.multipleSelection=e},submit:function(){var e=this;console.log(this.multipleSelection);var t=[];this.multipleSelection.forEach(function(a){e.filterForm.equipmentStatusTag&&t.push({id:Math.random().toString(36).substr(-10),name:a.passName+"."+a.equipmentName+"._io_status",describe:(e.filterForm.passDescribe?a.passDescribe+" ":"")+(e.filterForm.equipmentDescribe?a.equipmentDescribe+" ":"")+"设备状态",ratioCalculation:!1,magnification:"2.0000",base:"0.0000",dataType:"布尔",direction:"只读",acquisitionCycle:"1000",IOTag:"at."+a.passName+"."+a.equipmentName+"._io_status",IOTagParentId:a.id,IOTagSelectId:"3",slaveStationID:"1",registerType:0,registerAddr:"0",dataFormat:0}),a.dataTags.forEach(function(i){(e.filterForm.floatingPoint&&"浮点"===i.dataType||e.filterForm.parseInt&&"整型"===i.dataType||e.filterForm.boolean&&"布尔"===i.dataType||e.filterForm.string&&"字符串"===i.dataType||e.filterForm.binary&&"二进制"===i.dataType)&&t.push({id:Math.random().toString(36).substr(-10),name:a.passName+"."+a.equipmentName+"."+i.name,describe:(e.filterForm.passDescribe?a.passDescribe+" ":"")+(e.filterForm.equipmentDescribe?a.equipmentDescribe+" ":"")+i.describe,ratioCalculation:!1,magnification:"2.0000",base:"0.0000",dataType:i.dataType,direction:i.direction,acquisitionCycle:i.acquisitionCycle,IOTag:"io."+a.passName+"."+a.equipmentName+"."+i.name,IOTagParentId:a.id,IOTagSelectId:i.id,slaveStationID:"1",registerType:0,registerAddr:"0",dataFormat:0})})}),t.filter(function(t){return!e.dataTags.some(function(e){return e.name===t.name})}).forEach(function(t){e.dataTags.push(t)}),this.dataTags.sort(G("name","asc")),this.dataTags.map(function(t,a){e.$set(t,"index",a+1)}),this.dialogVisible=!1}}},ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dialogVisible?a("el-dialog",{staticClass:"tag-load-dialog",attrs:{title:"IO标签映射操作",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-row",{staticClass:"params-dialog-row"},[a("el-checkbox",{model:{value:e.filterForm.passDescribe,callback:function(t){e.$set(e.filterForm,"passDescribe",t)},expression:"filterForm.passDescribe"}},[e._v("保留通道描述")]),e._v(" "),a("el-checkbox",{model:{value:e.filterForm.equipmentDescribe,callback:function(t){e.$set(e.filterForm,"equipmentDescribe",t)},expression:"filterForm.equipmentDescribe"}},[e._v("保留设备描述")]),e._v(" "),a("el-checkbox",{model:{value:e.filterForm.equipmentStatusTag,callback:function(t){e.$set(e.filterForm,"equipmentStatusTag",t)},expression:"filterForm.equipmentStatusTag"}},[e._v("添加设备状态标签")])],1),e._v(" "),a("el-row",{staticClass:"params-dialog-row"},[a("el-checkbox",{model:{value:e.filterForm.floatingPoint,callback:function(t){e.$set(e.filterForm,"floatingPoint",t)},expression:"filterForm.floatingPoint"}},[e._v("浮点")]),e._v(" "),a("el-checkbox",{model:{value:e.filterForm.parseInt,callback:function(t){e.$set(e.filterForm,"parseInt",t)},expression:"filterForm.parseInt"}},[e._v("整型")]),e._v(" "),a("el-checkbox",{model:{value:e.filterForm.boolean,callback:function(t){e.$set(e.filterForm,"boolean",t)},expression:"filterForm.boolean"}},[e._v("布尔")]),e._v(" "),a("el-checkbox",{model:{value:e.filterForm.string,callback:function(t){e.$set(e.filterForm,"string",t)},expression:"filterForm.string"}},[e._v("字符串")]),e._v(" "),a("el-checkbox",{model:{value:e.filterForm.binary,callback:function(t){e.$set(e.filterForm,"binary",t)},expression:"filterForm.binary"}},[e._v("二进制")])],1),e._v(" "),a("el-table",{attrs:{data:e.tableData,"current-row-key":"","empty-text":"暂无标签"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection","min-width":"30"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"40"}}),e._v(" "),a("el-table-column",{attrs:{label:"名称","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.passName+"."+t.row.equipmentName)+"\n      ")]}}],null,!1,958094056)}),e._v(" "),a("el-table-column",{attrs:{label:"描述","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.passDescribe+"."+t.row.equipmentDescribe)+"\n      ")]}}],null,!1,2561069800)})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1):e._e()},staticRenderFns:[]};var ie={components:{TagSelect:ee,TagLoad:a("VU/8")(te,ae,!1,function(e){a("2YQ0")},"data-v-56f46fd4",null).exports},props:{treeData:{type:Array,default:function(){return[]}},passList:{type:Array,default:function(){return[]}},equipmentList:{type:Array,default:function(){return[]}},id:{type:String},dataTagsOrg:{type:Array,default:function(){return[]}}},data:function(){return{dataTags:[],dataColumns:H,dataTypeList:["全部","浮点","整型","布尔","字符串","二进制"],dataTypeSelect:"全部",multipleSelection:[],dialogVisible:!1,dialogVisibleParam:!1,dialogType:"",dialogTitle:"",formData:{name:"",describe:"",ratioCalculation:!1,magnification:"1.0000",base:"0.0000",dataType:"整型",direction:"只读",acquisitionCycle:"1000",IOTag:"at._kernal_version",IOTagParentId:"1",IOTagSelectId:"0",slaveStationID:"1",registerType:2,registerAddr:"0",dataFormat:0},formDataOrg:{},directionList:["只读","只写","读写"],registerTypeList:[{label:"1号命令：读、写开关量",value:0},{label:"2号命令：读开关量状态",value:1},{label:"3号命令：读、写保持寄存器",value:2},{label:"4号命令：读输入寄存器",value:3}],dataFormatList:[{label:"2字节整型 先高后低 顺序21",value:0},{label:"2字节整型 先高后低 顺序12",value:1},{label:"2字节整型 第1位",value:2},{label:"2字节整型 第2位",value:3},{label:"4字节整型 顺序4321",value:4},{label:"8字节浮点 顺序87654321",value:5}],submitLoading:!1,downloadLoading:!1,tagDescribe:"",tableMaxHeight:0}},created:function(){var e=document.documentElement.clientHeight;this.tableMaxHeight=e-73-40-55-60-40,this.getData()},methods:{getData:function(){this.refreshData()},refreshData:function(){var e=this;"全部"!==this.dataTypeSelect?this.dataTags=this.dataTagsOrg.filter(function(t){return t.dataType===e.dataTypeSelect}):this.dataTags=this.dataTagsOrg,this.dataTags.sort(G("name","asc")),this.dataTags.map(function(t,a){e.$set(t,"index",a+1)})},insertTag:function(){var e=this;this.dialogVisible=!0,this.dialogType="insert",this.$nextTick(function(){e.$refs.dialogForm.resetFields(),e.dialogTitle="数据服务标签-"+("insert"===e.dialogType?"新建":"修改")})},loadTags:function(){this.$refs.tagLoad.tagLoad()},editTag:function(e){var t=this;this.dialogVisible=!0,this.dialogType="edit",this.$nextTick(function(){t.dialogTitle="数据服务标签-"+("insert"===t.dialogType?"新建":"修改"),t.formDataOrg=e,t.formData=JSON.parse(n()(e))})},setParams:function(){this.dialogVisibleParam=!0,this.otherParamsOrg=JSON.parse(n()({ratioCalculation:this.formData.ratioCalculation,magnification:this.formData.magnification,base:this.formData.base}))},tagSelect:function(){this.$refs.tagSelect.tagSelect()},tagClick:function(e){console.log(e),e&&(this.formData.IOTag=("IO属性"===e.source?"at.":"io.")+(e.passName?e.passName+".":"")+(e.equpimentName?e.equpimentName+".":"")+e.name,this.formData.IOTagParentId=e.parentId,this.formData.IOTagSelectId=e.id,this.tagDescribe=(e.passDescribe?e.passDescribe+" ":"")+(e.equipmentDescribe?e.equipmentDescribe+" ":"")+e.describe)},tagSubmit:function(){var e=this,t=JSON.parse(n()(this.formData));switch(this.submitLoading=!0,this.dialogType){case"insert":this.dataTags.some(function(t){return t.name===e.formData.name})?(this.$message.error("该标签已存在！"),this.submitLoading=!1):(t.id=Math.random().toString(36).substr(-10),this.dataTags.push(JSON.parse(n()(t))),this.refreshData(),this.submitLoading=!1,this.dialogVisible=!1);break;case"edit":this.dataTags.some(function(t){return t.name===e.formData.name})&&this.formData.name!==this.formDataOrg.name?(this.$message.error("该标签已存在！"),this.submitLoading=!1):(this.$set(this.dataTags,this.formData.index-1,JSON.parse(n()(t))),this.submitLoading=!1,this.dialogVisible=!1)}},deleteTag:function(e){var t=this;this.$confirm("将删除标签, 是否继续?","提示",{type:"warning"}).then(function(){t.dataTags.forEach(function(a,i){a.id===e&&t.dataTags.splice(i,1)}),t.refreshData()}).catch(function(){})},handleSelectionChange:function(e){this.multipleSelection=e},deleteTags:function(){var e=this;if(0===this.multipleSelection.length)return this.$message({message:"未选择标签",type:"warning",duration:1e3}),!1;this.$confirm("将删除标签, 是否继续?","提示",{type:"warning"}).then(function(){for(var t=function(t){e.multipleSelection.forEach(function(a){e.dataTags[t].id===a.id&&e.dataTags.splice(t,1)})},a=0;a<e.dataTags.length;a++)t(a);e.refreshData()}).catch(function(){})},tagToggle:function(e,t){if("up"===t){if(0!==e){var a=this.dataTags[e-1];this.$set(this.dataTags,e-1,this.dataTags[e]),this.$set(this.dataTags,e,a),this.refreshData()}}else if(e!==this.dataTags.length-1){var i=this.dataTags[e+1];this.$set(this.dataTags,e+1,this.dataTags[e]),this.$set(this.dataTags,e,i),this.refreshData()}},downloadTable:function(){var e=this;this.downloadLoading=!0,a.e(0).then(a.bind(null,"zWO4")).then(function(t){var a=W,i=j,s=e.dataTags,l=e.formatJson(i,s);t.export_json_to_excel({header:a,data:l,filename:"数据标签-通道",autoWidth:!0,bookType:"xlsx"}),e.downloadLoading=!1})},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return"timestamp"===e?L(t[e]):t[e]})})},uploadTable:function(){this.$refs["excel-upload-input"].click()},handleClick:function(e){var t=e.target.files[0];t&&this.upload(t)},upload:function(e){this.$refs["excel-upload-input"].value=null,this.beforeUpload(e)&&this.readerData(e)},beforeUpload:function(e){return e.size/1024/1024<1||(this.$message({message:"文件大小需小于1MB",type:"warning"}),!1)},readerData:function(e){var t=this;return this.loading=!0,new M.a(function(a,i){var s=new FileReader;s.onload=function(e){var i=e.target.result,s=J.a.read(i,{type:"array"}),l=s.SheetNames[0],r=s.Sheets[l],o=t.getHeaderRow(r),n=J.a.utils.sheet_to_json(r);t.generateData({header:o,results:n}),t.loading=!1,a()},s.readAsArrayBuffer(e)})},getHeaderRow:function(e){var t=[],a=J.a.utils.decode_range(e["!ref"]),i=void 0,s=a.s.r;for(i=a.s.c;i<=a.e.c;++i){var l=e[J.a.utils.encode_cell({c:i,r:s})],r="UNKNOWN "+i;l&&l.t&&(r=J.a.utils.format_cell(l)),t.push(r)}return t},generateData:function(e){var t=this,a=(e.header,e.results);a.forEach(function(e){C()(e).forEach(function(a){C()(Q).forEach(function(i){a===Q[i]&&(t.$set(e,i,e[a]),t.$delete(e,a))})})}),this.dataTagsOrg.splice(0,this.dataTagsOrg.length),a.forEach(function(e){t.dataTagsOrg.push(e)}),this.refreshData()}},watch:{id:function(e){this.getData()}}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-component"},[a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"请选择"},on:{change:e.refreshData},model:{value:e.dataTypeSelect,callback:function(t){e.dataTypeSelect=t},expression:"dataTypeSelect"}},e._l(e.dataTypeList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:e.insertTag}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"small",plain:""},on:{click:e.loadTags}},[e._v("加载")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small",plain:""},on:{click:e.deleteTags}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small",plain:"",loading:e.downloadLoading},on:{click:e.downloadTable}},[e._v("导出")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:e.uploadTable}},[e._v("导入")]),e._v(" "),a("input",{ref:"excel-upload-input",staticClass:"excel-upload-input",attrs:{type:"file",accept:".xlsx, .xls"},on:{change:e.handleClick}})],1),e._v(" "),a("el-table",{attrs:{data:e.dataTags,border:"","current-row-key":"","empty-text":"暂无标签","max-height":e.tableMaxHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"index",label:"序号",width:"40"}}),e._v(" "),e._l(e.dataColumns,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label,width:e.width?e.width:"","min-width":e.minWidth?e.minWidth:""}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-edit"},on:{click:function(a){return e.editTag(t.row)}}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"3px"},attrs:{type:"danger",size:"mini",plain:"",icon:"el-icon-delete"},on:{click:function(a){return e.deleteTag(t.row.id)}}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"3px"},attrs:{type:"success",size:"mini",plain:"",icon:"el-icon-top",disabled:1===t.row.index},on:{click:function(a){return e.tagToggle(t.row.index-1,"up")}}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"3px"},attrs:{type:"success",size:"mini",plain:"",icon:"el-icon-bottom",disabled:t.row.index===e.dataTags.length},on:{click:function(a){return e.tagToggle(t.row.index-1,"down")}}})]}}])})],2),e._v(" "),a("el-dialog",{staticClass:"tag-dialog",attrs:{title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dialogForm",attrs:{model:e.formData,"label-position":"left"}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{"label-width":"55px",label:"名称：",prop:"name"}},[a("el-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{"label-width":"55px",label:"描述：",prop:"describe"}},[a("el-input",{model:{value:e.formData.describe,callback:function(t){e.$set(e.formData,"describe",t)},expression:"formData.describe"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{margin:"0 0 20px 10px"},on:{click:e.setParams}},[e._v("其他参数")])],1),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"数据类型：",prop:"dataType"}},[a("el-select",{staticStyle:{width:"203px"},attrs:{placeholder:"请选择"},model:{value:e.formData.dataType,callback:function(t){e.$set(e.formData,"dataType",t)},expression:"formData.dataType"}},e._l(e.dataTypeList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"读写方向：",prop:"direction"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.direction,callback:function(t){e.$set(e.formData,"direction",t)},expression:"formData.direction"}},e._l(e.directionList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{"label-width":"145px",label:"采集周期（毫秒）：",prop:"acquisitionCycle"}},[a("el-input",{model:{value:e.formData.acquisitionCycle,callback:function(t){e.$set(e.formData,"acquisitionCycle",t)},expression:"formData.acquisitionCycle"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{"label-width":"100px",label:"IO标签链接：",prop:"IOTag"}},[a("el-input",{staticStyle:{width:"fit-content"},attrs:{disabled:""},model:{value:e.formData.IOTag,callback:function(t){e.$set(e.formData,"IOTag",t)},expression:"formData.IOTag"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{margin:"0 0 20px 10px"},on:{click:e.tagSelect}},[e._v("选择标签")])],1),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{"label-width":"70px",label:"从站ID：",prop:"slaveStationID"}},[a("el-input",{model:{value:e.formData.slaveStationID,callback:function(t){e.$set(e.formData,"slaveStationID",t)},expression:"formData.slaveStationID"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{"label-width":"100px",label:"寄存器类型：",prop:"registerType"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择"},model:{value:e.formData.registerType,callback:function(t){e.$set(e.formData,"registerType",t)},expression:"formData.registerType"}},e._l(e.registerTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{"label-width":"100px",label:"寄存器地址：",prop:"registerAddr"}},[a("el-input",{model:{value:e.formData.registerAddr,callback:function(t){e.$set(e.formData,"registerAddr",t)},expression:"formData.registerAddr"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{"label-width":"90px",label:"数据格式：",prop:"dataFormat"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择"},model:{value:e.formData.dataFormat,callback:function(t){e.$set(e.formData,"dataFormat",t)},expression:"formData.dataFormat"}},e._l(e.dataFormatList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.tagSubmit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"其他参数 浮点",visible:e.dialogVisibleParam},on:{"update:visible":function(t){e.dialogVisibleParam=t}}},[a("el-checkbox",{staticStyle:{"margin-right":"20px"},model:{value:e.formData.ratioCalculation,callback:function(t){e.$set(e.formData,"ratioCalculation",t)},expression:"formData.ratioCalculation"}},[e._v("系数计算")]),e._v(" "),a("div",{staticClass:"params-dialog-row-div"},[e._v("\n       倍率（a）\n      "),a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!e.formData.ratioCalculation},model:{value:e.formData.magnification,callback:function(t){e.$set(e.formData,"magnification",t)},expression:"formData.magnification"}}),e._v("\n       基数（b）\n      "),a("el-input",{staticStyle:{width:"100px","margin-right":"20px"},attrs:{disabled:!e.formData.ratioCalculation},model:{value:e.formData.base,callback:function(t){e.$set(e.formData,"base",t)},expression:"formData.base"}}),e._v("\n      形如：y = ax + b\n    ")],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisibleParam=!1,e.formData.ratioCalculation=e.otherParamsOrg.ratioCalculation,e.formData.magnification=e.otherParamsOrg.magnification,e.formData.base=e.otherParamsOrg.base}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleParam=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("tag-select",{ref:"tagSelect",attrs:{id:e.id,"tag-describe":e.tagDescribe,"tree-data":e.treeData,"form-data":e.formData,"pass-list":e.passList,"equipment-list":e.equipmentList},on:{"tag-click":e.tagClick}}),e._v(" "),a("tag-load",{ref:"tagLoad",attrs:{"tree-data":e.treeData,"data-tags":e.dataTags,"pass-list":e.passList,"equipment-list":e.equipmentList}})],1)},staticRenderFns:[]};var le={components:{PluginSelect:v,PassParams:D,PassTags:a("VU/8")(ie,se,!1,function(e){a("feFl")},"data-v-f08d2dc0",null).exports},props:{treeData:{type:Array,default:function(){return[]}},equipmentList:{type:Array,default:function(){return[]}},id:{type:String},passList:{type:Array,default:function(){return[]}},pluginList:{type:Array,default:function(){return[]}},passTypeList:{type:Array},sataList:{type:Array},baudList:{type:Array},dataList:{type:Array},checkList:{type:Array},stopList:{type:Array}},data:function(){return{formPass:{},activeName:"first",activeNames:["1"],bindingIPVisible:!1}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.passList.forEach(function(t,a){t.id===e.id&&(e.formPass=e.passList[a])}),this.activeName="first"},setParams:function(){this.$refs.passParams.setParams()},pluginSelect:function(){this.$refs.pluginSelect.pluginSelect()},pluginClick:function(e){2===e.level&&(this.formPass.plugin=e),console.log(this.formPass)},bindingIP:function(){this.bindingIPVisible=!0,this.bindingIpOrg=JSON.parse(n()(this.formPass.bindingIp))}},watch:{id:function(e){this.getData()}}},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},["1"===e.id.slice(0,1)?a("el-form",{attrs:{model:e.formPass,"label-position":"left"}},[a("el-row",[a("el-col",{staticStyle:{width:"420px"}},[a("el-form-item",{attrs:{"label-width":"95px",label:"名称(英文)：",prop:"passName"}},[a("el-input",{model:{value:e.formPass.passName,callback:function(t){e.$set(e.formPass,"passName",t)},expression:"formPass.passName"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"380px"}},[a("el-form-item",{attrs:{"label-width":"55px",label:"描述：",prop:"passDescribe"}},[a("el-input",{model:{value:e.formPass.passDescribe,callback:function(t){e.$set(e.formPass,"passDescribe",t)},expression:"formPass.passDescribe"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{margin:"0 0 20px 20px"},on:{click:e.setParams}},[e._v("其他参数")])],1),e._v(" "),a("el-row",[a("el-col",{staticStyle:{width:"358px"}},[a("el-form-item",{attrs:{"label-width":"55px",label:"厂家："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formPass.plugin.factory,callback:function(t){e.$set(e.formPass.plugin,"factory",t)},expression:"formPass.plugin.factory"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"358px"}},[a("el-form-item",{attrs:{"label-width":"55px",label:"描述："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formPass.plugin.describe,callback:function(t){e.$set(e.formPass.plugin,"describe",t)},expression:"formPass.plugin.describe"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{margin:"0 0 20px 20px"},on:{click:e.pluginSelect}},[e._v("选择插件")]),e._v(" "),a("el-button",{staticStyle:{"margin-bottom":"20px"}},[e._v("帮助")])],1),e._v(" "),a("el-row",[a("el-col",{staticStyle:{width:"940px"}},[a("el-form-item",{attrs:{"label-width":"55px",label:"路径："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formPass.plugin.path,callback:function(t){e.$set(e.formPass.plugin,"path",t)},expression:"formPass.plugin.path"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{"label-width":"85px",label:"通道类型：",prop:"passType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.passType,callback:function(t){e.$set(e.formPass,"passType",t)},expression:"formPass.passType"}},e._l(e.passTypeList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1)],1),e._v(" "),"串口"===e.formPass.passType?a("el-row",[a("el-col",{staticStyle:{width:"160px"}},[a("el-form-item",{attrs:{"label-width":"55px",label:"串口：",prop:"sata"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.sata,callback:function(t){e.$set(e.formPass,"sata",t)},expression:"formPass.sata"}},e._l(e.sataList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"180px"}},[a("el-form-item",{attrs:{"label-width":"75px",label:"波特率：",prop:"baudRate"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.baudRate,callback:function(t){e.$set(e.formPass,"baudRate",t)},expression:"formPass.baudRate"}},e._l(e.baudList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"160px"}},[a("el-form-item",{attrs:{"label-width":"75px",label:"数据位：",prop:"dataBits"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.dataBits,callback:function(t){e.$set(e.formPass,"dataBits",t)},expression:"formPass.dataBits"}},e._l(e.dataList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"180px"}},[a("el-form-item",{attrs:{"label-width":"75px",label:"校验位：",prop:"checkBits"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.checkBits,callback:function(t){e.$set(e.formPass,"checkBits",t)},expression:"formPass.checkBits"}},e._l(e.checkList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"180px"}},[a("el-form-item",{attrs:{"label-width":"75px",label:"停止位：",prop:"stopBits"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.stopBits,callback:function(t){e.$set(e.formPass,"stopBits",t)},expression:"formPass.stopBits"}},e._l(e.stopList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1)],1):e._e(),e._v(" "),"串口"!==e.formPass.passType&&"虚拟端口"!==e.formPass.passType?a("el-row",[a("el-col",{staticStyle:{width:"300px"}},[a("el-form-item",{attrs:{"label-width":"70px",label:"TCP客户端"===e.formPass.passType?"远程IP：":"本地IP：",prop:"ip"}},[a("el-input",{model:{value:e.formPass.ip,callback:function(t){e.$set(e.formPass,"ip",t)},expression:"formPass.ip"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"300px"}},[a("el-form-item",{attrs:{"label-width":"85px",label:"TCP客户端"===e.formPass.passType?"远程端口：":"本地端口：",prop:"port"}},[a("el-input",{model:{value:e.formPass.port,callback:function(t){e.$set(e.formPass,"port",t)},expression:"formPass.port"}})],1)],1),e._v(" "),"TCP客户端"===e.formPass.passType?a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:e.bindingIP}},[e._v("需要绑定本地IP")]):e._e()],1):e._e()],1):a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"first"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-setting"}),e._v(" 配置参数\n      ")]),e._v(" "),a("el-form",{attrs:{model:e.formPass,"label-position":"left"}},[a("el-row",[a("el-col",{staticStyle:{width:"420px"}},[a("el-form-item",{attrs:{"label-width":"95px",label:"名称(英文)：",prop:"passName"}},[a("el-input",{model:{value:e.formPass.passName,callback:function(t){e.$set(e.formPass,"passName",t)},expression:"formPass.passName"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"380px"}},[a("el-form-item",{attrs:{"label-width":"55px",label:"描述：",prop:"passDescribe"}},[a("el-input",{model:{value:e.formPass.passDescribe,callback:function(t){e.$set(e.formPass,"passDescribe",t)},expression:"formPass.passDescribe"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{margin:"0 0 20px 20px"},on:{click:e.setParams}},[e._v("其他参数")])],1),e._v(" "),a("el-row",[a("el-col",{staticStyle:{width:"358px"}},[a("el-form-item",{attrs:{"label-width":"55px",label:"厂家："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formPass.plugin.factory,callback:function(t){e.$set(e.formPass.plugin,"factory",t)},expression:"formPass.plugin.factory"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"358px"}},[a("el-form-item",{attrs:{"label-width":"55px",label:"描述："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formPass.plugin.describe,callback:function(t){e.$set(e.formPass.plugin,"describe",t)},expression:"formPass.plugin.describe"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{margin:"0 0 20px 20px"},on:{click:e.pluginSelect}},[e._v("选择插件")]),e._v(" "),a("el-button",{staticStyle:{"margin-bottom":"20px"}},[e._v("帮助")])],1),e._v(" "),a("el-row",[a("el-col",{staticStyle:{width:"940px"}},[a("el-form-item",{attrs:{"label-width":"55px",label:"路径："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formPass.plugin.path,callback:function(t){e.$set(e.formPass.plugin,"path",t)},expression:"formPass.plugin.path"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{"label-width":"85px",label:"通道类型：",prop:"passType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.passType,callback:function(t){e.$set(e.formPass,"passType",t)},expression:"formPass.passType"}},e._l(e.passTypeList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1)],1),e._v(" "),"串口"===e.formPass.passType?a("el-row",[a("el-col",{staticStyle:{width:"160px"}},[a("el-form-item",{attrs:{"label-width":"55px",label:"串口：",prop:"sata"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.sata,callback:function(t){e.$set(e.formPass,"sata",t)},expression:"formPass.sata"}},e._l(e.sataList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"180px"}},[a("el-form-item",{attrs:{"label-width":"75px",label:"波特率：",prop:"baudRate"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.baudRate,callback:function(t){e.$set(e.formPass,"baudRate",t)},expression:"formPass.baudRate"}},e._l(e.baudList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"160px"}},[a("el-form-item",{attrs:{"label-width":"75px",label:"数据位：",prop:"dataBits"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.dataBits,callback:function(t){e.$set(e.formPass,"dataBits",t)},expression:"formPass.dataBits"}},e._l(e.dataList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"180px"}},[a("el-form-item",{attrs:{"label-width":"75px",label:"校验位：",prop:"checkBits"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.checkBits,callback:function(t){e.$set(e.formPass,"checkBits",t)},expression:"formPass.checkBits"}},e._l(e.checkList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"180px"}},[a("el-form-item",{attrs:{"label-width":"75px",label:"停止位：",prop:"stopBits"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formPass.stopBits,callback:function(t){e.$set(e.formPass,"stopBits",t)},expression:"formPass.stopBits"}},e._l(e.stopList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1)],1):e._e(),e._v(" "),"串口"!==e.formPass.passType&&"虚拟端口"!==e.formPass.passType?a("el-row",[a("el-col",{staticStyle:{width:"300px"}},[a("el-form-item",{attrs:{"label-width":"70px",label:"TCP客户端"===e.formPass.passType?"远程IP：":"本地IP：",prop:"ip"}},[a("el-input",{model:{value:e.formPass.ip,callback:function(t){e.$set(e.formPass,"ip",t)},expression:"formPass.ip"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"300px"}},[a("el-form-item",{attrs:{"label-width":"85px",label:"TCP客户端"===e.formPass.passType?"远程端口：":"本地端口：",prop:"port"}},[a("el-input",{model:{value:e.formPass.port,callback:function(t){e.$set(e.formPass,"port",t)},expression:"formPass.port"}})],1)],1),e._v(" "),"TCP客户端"===e.formPass.passType?a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:e.bindingIP}},[e._v("需要绑定本地IP")]):e._e(),e._v(" "),"TCP服务端"===e.formPass.passType?a("el-button",{staticStyle:{"margin-left":"20px"}},[e._v("允许客户端接入列表")]):e._e()],1):e._e(),e._v(" "),a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"基本参数",name:"1"}},[a("div",[e._v("延迟回复："+e._s(e.formPass.delayTime))])])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{name:"second"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-edit-outline"}),e._v(" 数据标签\n      ")]),e._v(" "),a("pass-tags",{attrs:{id:e.id,"tree-data":e.treeData,"pass-list":e.passList,"equipment-list":e.equipmentList,"data-tags-org":e.formPass.dataTags}})],1)],1),e._v(" "),a("pass-params",{ref:"passParams",attrs:{id:e.id,"form-pass":e.formPass,"pass-type-list":e.passTypeList,"sata-list":e.sataList,"baud-list":e.baudList,"data-list":e.dataList,"check-list":e.checkList,"stop-list":e.stopList}}),e._v(" "),a("plugin-select",{ref:"pluginSelect",attrs:{id:e.id,"form-pass":e.formPass,"plugin-list":e.pluginList},on:{"plugin-click":e.pluginClick}}),e._v(" "),a("el-dialog",{staticClass:"bind-dialog",attrs:{title:"IP地址框",visible:e.bindingIPVisible},on:{"update:visible":function(t){e.bindingIPVisible=t}}},[a("el-row",[e._v("\n      本地IP：\n      "),a("el-input",{staticStyle:{width:"300px"},model:{value:e.formPass.bindingIp,callback:function(t){e.$set(e.formPass,"bindingIp",t)},expression:"formPass.bindingIp"}})],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[e._v("\n      注：本地IP，主要用来网卡绑定，以方便使用固定路由，为空的话，系统自己匹配路由。\n    ")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.bindingIPVisible=!1,e.formPass.bindingIp=e.bindingIpOrg}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.bindingIPVisible=!1}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var oe=a("VU/8")(le,re,!1,function(e){a("6Jit")},"data-v-7a4f580c",null).exports,ne={props:{formData:{type:Object}},data:function(){return{dialogVisible:!1,dialogTitle:"",calculationList:["不参与计算","乘设备系数R1","乘设备系数R2","乘设备系数R1*R2"],advancedOperationList:["无计算","2字节无符号 先高后低","8字节浮点数 顺序87654321","取子字符串","按位取"],activeNames:["1"]}},methods:{setParams:function(){this.dialogVisible=!0,this.dialogTitle="数据标签其他参数 "+this.formData.dataType,this.paramsOrg=JSON.parse(n()(this.formData.otherParams))}},watch:{dialogVisible:function(e){!e&&(this.activeNames=["1"])}}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-row",{staticClass:"params-dialog-row"},[a("el-checkbox",{staticStyle:{"margin-right":"20px"},model:{value:e.formData.otherParams.takeAbsoluteValue,callback:function(t){e.$set(e.formData.otherParams,"takeAbsoluteValue",t)},expression:"formData.otherParams.takeAbsoluteValue"}},[e._v("取绝对值")]),e._v("\n     单位 \n    "),a("el-input",{staticStyle:{width:"100px","margin-right":"20px"},model:{value:e.formData.otherParams.absoluteValue,callback:function(t){e.$set(e.formData.otherParams,"absoluteValue",t)},expression:"formData.otherParams.absoluteValue"}}),e._v("\n     设备系数计算 \n    "),a("el-select",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"请选择"},model:{value:e.formData.otherParams.calculation,callback:function(t){e.$set(e.formData.otherParams,"calculation",t)},expression:"formData.otherParams.calculation"}},e._l(e.calculationList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-row",{staticClass:"params-dialog-row"},[a("el-checkbox",{model:{value:e.formData.otherParams.ratioCalculation,callback:function(t){e.$set(e.formData.otherParams,"ratioCalculation",t)},expression:"formData.otherParams.ratioCalculation"}},[e._v("系数计算")]),e._v(" "),a("div",{staticClass:"params-dialog-row-div"},[e._v("\n      倍率（a）\n      "),a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!e.formData.otherParams.ratioCalculation},model:{value:e.formData.otherParams.magnification,callback:function(t){e.$set(e.formData.otherParams,"magnification",t)},expression:"formData.otherParams.magnification"}}),e._v("\n      基数（b）\n      "),a("el-input",{staticStyle:{width:"100px","margin-right":"20px"},attrs:{disabled:!e.formData.otherParams.ratioCalculation},model:{value:e.formData.otherParams.base,callback:function(t){e.$set(e.formData.otherParams,"base",t)},expression:"formData.otherParams.base"}}),e._v("\n      形如：y = ax + b\n      "),a("el-checkbox",{staticStyle:{"margin-left":"20px"},attrs:{disabled:!e.formData.otherParams.ratioCalculation},model:{value:e.formData.otherParams.reverseCoefficient,callback:function(t){e.$set(e.formData.otherParams,"reverseCoefficient",t)},expression:"formData.otherParams.reverseCoefficient"}},[e._v("写使用反向系数")])],1)],1),e._v(" "),a("el-row",{staticClass:"params-dialog-row"},[a("el-checkbox",{model:{value:e.formData.otherParams.rangeConversion,callback:function(t){e.$set(e.formData.otherParams,"rangeConversion",t)},expression:"formData.otherParams.rangeConversion"}},[e._v("量程转换")]),e._v(" "),a("div",{staticClass:"params-dialog-row-div"},[e._v("\n      量程最大 \n      "),a("el-input",{staticStyle:{width:"100px","margin-right":"20px"},attrs:{disabled:!e.formData.otherParams.rangeConversion},model:{value:e.formData.otherParams.maxRange,callback:function(t){e.$set(e.formData.otherParams,"maxRange",t)},expression:"formData.otherParams.maxRange"}}),e._v("\n      采集值最大 \n      "),a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!e.formData.otherParams.rangeConversion},model:{value:e.formData.otherParams.maxGather,callback:function(t){e.$set(e.formData.otherParams,"maxGather",t)},expression:"formData.otherParams.maxGather"}})],1),e._v(" "),a("div",{staticClass:"params-dialog-row-div",staticStyle:{"margin-top":"10px"}},[e._v("\n      量程最小 \n      "),a("el-input",{staticStyle:{width:"100px","margin-right":"20px"},attrs:{disabled:!e.formData.otherParams.rangeConversion},model:{value:e.formData.otherParams.minRange,callback:function(t){e.$set(e.formData.otherParams,"minRange",t)},expression:"formData.otherParams.minRange"}}),e._v("\n      采集值最小 \n      "),a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!e.formData.otherParams.rangeConversion},model:{value:e.formData.otherParams.minGather,callback:function(t){e.$set(e.formData.otherParams,"minGather",t)},expression:"formData.otherParams.minGather"}})],1)],1),e._v(" "),a("el-row",{staticClass:"params-dialog-row"},[a("el-checkbox",{model:{value:e.formData.otherParams.dataFilter,callback:function(t){e.$set(e.formData.otherParams,"dataFilter",t)},expression:"formData.otherParams.dataFilter"}},[e._v("数据有效范围过滤")]),e._v(" "),a("div",{staticClass:"params-dialog-row-div"},[e._v("\n      数据最小 \n      "),a("el-input",{staticStyle:{width:"100px","margin-right":"20px"},attrs:{disabled:!e.formData.otherParams.dataFilter},model:{value:e.formData.otherParams.minData,callback:function(t){e.$set(e.formData.otherParams,"minData",t)},expression:"formData.otherParams.minData"}}),e._v("\n      数据最大 \n      "),a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!e.formData.otherParams.dataFilter},model:{value:e.formData.otherParams.maxData,callback:function(t){e.$set(e.formData.otherParams,"maxData",t)},expression:"formData.otherParams.maxData"}})],1),e._v(" "),a("div",{staticClass:"params-dialog-row-div",staticStyle:{"margin-top":"10px"}},[a("el-radio",{attrs:{label:"1",disabled:!e.formData.otherParams.dataFilter},model:{value:e.formData.otherParams.dataRadio,callback:function(t){e.$set(e.formData.otherParams,"dataRadio",t)},expression:"formData.otherParams.dataRadio"}},[e._v("小于最小值取最小值，大于最大值取最大值")]),e._v(" "),a("el-radio",{attrs:{label:"2",disabled:!e.formData.otherParams.dataFilter},model:{value:e.formData.otherParams.dataRadio,callback:function(t){e.$set(e.formData.otherParams,"dataRadio",t)},expression:"formData.otherParams.dataRadio"}},[e._v("小于最小值、大于最大值忽略")])],1)],1),e._v(" "),a("el-row",{staticClass:"params-dialog-row"},[e._v("\n    高级运算\n    "),a("el-select",{staticStyle:{width:"200px",margin:"0 20px"},attrs:{placeholder:"请选择"},model:{value:e.formData.otherParams.advancedOperation,callback:function(t){e.$set(e.formData.otherParams,"advancedOperation",t)},expression:"formData.otherParams.advancedOperation"}},e._l(e.advancedOperationList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1),e._v("\n    参数1 \n    "),a("el-input",{staticStyle:{width:"100px","margin-right":"20px"},attrs:{disabled:!("取子字符串"===e.formData.otherParams.advancedOperation||"按位取"===e.formData.otherParams.advancedOperation)},model:{value:e.formData.otherParams.param1,callback:function(t){e.$set(e.formData.otherParams,"param1",t)},expression:"formData.otherParams.param1"}}),e._v("\n    参数2 \n    "),a("el-input",{staticStyle:{width:"100px"},attrs:{disabled:!("取子字符串"===e.formData.otherParams.advancedOperation||"按位取"===e.formData.otherParams.advancedOperation)},model:{value:e.formData.otherParams.param2,callback:function(t){e.$set(e.formData.otherParams,"param2",t)},expression:"formData.otherParams.param2"}})],1),e._v(" "),a("el-collapse",{staticStyle:{"margin-top":"20px"},attrs:{accordion:""},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"用户参数",name:"1"}},[a("div",{staticClass:"collapse-content"},[e._v("类型编码：\n        "),a("el-input",{staticStyle:{"max-width":"400px"},model:{value:e.formData.otherParams.code,callback:function(t){e.$set(e.formData.otherParams,"code",t)},expression:"formData.otherParams.code"}})],1),e._v(" "),a("div",{staticClass:"collapse-content"},[e._v("是否缓存：\n        "),a("el-radio",{attrs:{label:!0},model:{value:e.formData.otherParams.cache,callback:function(t){e.$set(e.formData.otherParams,"cache",t)},expression:"formData.otherParams.cache"}},[e._v("缓存")]),e._v(" "),a("el-radio",{attrs:{label:!1},model:{value:e.formData.otherParams.cache,callback:function(t){e.$set(e.formData.otherParams,"cache",t)},expression:"formData.otherParams.cache"}},[e._v("不缓存")])],1)]),e._v(" "),a("el-collapse-item",{attrs:{title:"报警配置",name:"2"}},[a("div",{staticClass:"collapse-content"},[e._v("报警开关：\n        "),a("el-radio",{attrs:{label:!0},model:{value:e.formData.otherParams.alert,callback:function(t){e.$set(e.formData.otherParams,"alert",t)},expression:"formData.otherParams.alert"}},[e._v("打开")]),e._v(" "),a("el-radio",{attrs:{label:!1},model:{value:e.formData.otherParams.alert,callback:function(t){e.$set(e.formData.otherParams,"alert",t)},expression:"formData.otherParams.alert"}},[e._v("关闭")])],1),e._v(" "),a("div",{staticClass:"collapse-content"},[e._v("高高限：\n        "),a("el-input",{staticStyle:{"max-width":"400px"},model:{value:e.formData.otherParams.maxLimit,callback:function(t){e.$set(e.formData.otherParams,"maxLimit",t)},expression:"formData.otherParams.maxLimit"}})],1),e._v(" "),a("div",{staticClass:"collapse-content"},[e._v("高限：\n        "),a("el-input",{staticStyle:{"max-width":"400px"},model:{value:e.formData.otherParams.upperLimit,callback:function(t){e.$set(e.formData.otherParams,"upperLimit",t)},expression:"formData.otherParams.upperLimit"}})],1),e._v(" "),a("div",{staticClass:"collapse-content"},[e._v("低限：\n        "),a("el-input",{staticStyle:{"max-width":"400px"},model:{value:e.formData.otherParams.lowerLimit,callback:function(t){e.$set(e.formData.otherParams,"lowerLimit",t)},expression:"formData.otherParams.lowerLimit"}})],1),e._v(" "),a("div",{staticClass:"collapse-content"},[e._v("低低限：\n        "),a("el-input",{staticStyle:{"max-width":"400px"},model:{value:e.formData.otherParams.minLimit,callback:function(t){e.$set(e.formData.otherParams,"minLimit",t)},expression:"formData.otherParams.minLimit"}})],1),e._v(" "),a("div",{staticClass:"collapse-content"},[e._v("报警延迟（秒，0：不延时）：\n        "),a("el-input",{staticStyle:{"max-width":"400px"},model:{value:e.formData.otherParams.alarmDelay,callback:function(t){e.$set(e.formData.otherParams,"alarmDelay",t)},expression:"formData.otherParams.alarmDelay"}})],1),e._v(" "),a("div",{staticClass:"collapse-content"},[e._v("报警级别：\n        "),a("el-input",{staticStyle:{"max-width":"400px"},model:{value:e.formData.otherParams.alarmLevel,callback:function(t){e.$set(e.formData.otherParams,"alarmLevel",t)},expression:"formData.otherParams.alarmLevel"}})],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1,e.formData.otherParams=e.paramsOrg}}},[e._v("\n      取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var me={components:{EquipmentTagParams:a("VU/8")(ne,ce,!1,function(e){a("uiqG")},"data-v-03fc6daf",null).exports},props:{id:{type:String},dataTagsOrg:{type:Array,default:function(){return[]}}},data:function(){return{dataTags:[],dataColumns:z,dataTypeList:["全部","浮点","整型","布尔","字符串","二进制"],dataTypeSelect:"全部",multipleSelection:[],dialogVisible:!1,dialogVisibleParam:!1,dialogType:"",dialogTitle:"",formData:{name:"",describe:"",otherParams:{takeAbsoluteValue:!1,absoluteValue:"",calculation:"不参与计算",ratioCalculation:!1,magnification:"2.0000",base:"0.0000",reverseCoefficient:!1,rangeConversion:!1,maxRange:10,maxGather:4096,minRange:0,minGather:0,dataFilter:!1,maxData:100,minData:0,dataRadio:"1",advancedOperation:"无计算",param1:"",param2:"",code:0,cache:!1,alert:!1,maxLimit:"100.0",upperLimit:"80.0",lowerLimit:"20.0",minLimit:"0.0",alarmDelay:"3",alarmLevel:"3"},dataType:"整型",direction:"只读",acquisitionCycle:"1000",registerType:0,registerAddr:"0",analyticalMethod:0,displacementDeviation:"0",useBCD:!1},formDataOrg:{},directionList:["只读","只写","读写"],registerTypeList:[{label:"1号读、5号写：读、写开关量",value:0},{label:"2号命令：读开关量状态",value:1},{label:"3号读、6号或16号写：读写保持寄存器",value:2},{label:"4号命令：读输入寄存器",value:3}],analyticalMethodList:[{label:"按位取",value:0},{label:"2字节整型 先高后低 顺序12",value:1},{label:"2字节整型 第1位",value:2},{label:"2字节整型 第2位",value:3},{label:"4字节整型 顺序4321",value:4},{label:"8字节浮点 顺序87654321",value:5}],submitLoading:!1,downloadLoading:!1,tableMaxHeight:0}},created:function(){var e=document.documentElement.clientHeight;this.tableMaxHeight=e-73-40-55-60-40,this.getData()},methods:{getData:function(){this.refreshData()},refreshData:function(){var e=this;"全部"!==this.dataTypeSelect?this.dataTags=this.dataTagsOrg.filter(function(t){return t.dataType===e.dataTypeSelect}):this.dataTags=this.dataTagsOrg,this.dataTags.sort(G("name","asc")),this.dataTags.map(function(t,a){e.$set(t,"index",a+1)})},insertTag:function(){var e=this;this.dialogVisible=!0,this.dialogType="insert",this.$nextTick(function(){e.$refs.dialogForm.resetFields(),e.dialogTitle="IO数据标签-"+("insert"===e.dialogType?"新建":"修改")})},loadTags:function(){},editTag:function(e){var t=this;this.dialogVisible=!0,this.dialogType="edit",this.$nextTick(function(){t.dialogTitle="IO数据标签-"+("insert"===t.dialogType?"新建":"修改"),t.formDataOrg=e,t.formData=JSON.parse(n()(e))})},setParams:function(){this.$refs.equipmentTagParams.setParams()},tagSubmit:function(){var e=this,t=JSON.parse(n()(this.formData));switch(this.submitLoading=!0,this.dialogType){case"insert":this.dataTags.some(function(t){return t.name===e.formData.name})?(this.$message.error("该标签已存在！"),this.submitLoading=!1):(t.id=Math.random().toString(36).substr(-10),this.dataTags.push(JSON.parse(n()(t))),this.refreshData(),this.submitLoading=!1,this.dialogVisible=!1);break;case"edit":this.dataTags.some(function(t){return t.name===e.formData.name})&&this.formData.name!==this.formDataOrg.name?(this.$message.error("该标签已存在！"),this.submitLoading=!1):(this.$set(this.dataTags,this.formData.index-1,JSON.parse(n()(t))),this.submitLoading=!1,this.dialogVisible=!1)}},deleteTag:function(e){var t=this;this.$confirm("将删除标签, 是否继续?","提示",{type:"warning"}).then(function(){t.dataTags.forEach(function(a,i){a.id===e&&t.dataTags.splice(i,1)}),t.refreshData()}).catch(function(){})},handleSelectionChange:function(e){this.multipleSelection=e},deleteTags:function(){var e=this;if(0===this.multipleSelection.length)return this.$message({message:"未选择标签",type:"warning",duration:1e3}),!1;this.$confirm("将删除标签, 是否继续?","提示",{type:"warning"}).then(function(){for(var t=function(t){e.multipleSelection.forEach(function(a){e.dataTags[t].id===a.id&&e.dataTags.splice(t,1)})},a=0;a<e.dataTags.length;a++)t(a);e.refreshData()}).catch(function(){})},tagToggle:function(e,t){if("up"===t){if(0!==e){var a=this.dataTags[e-1];this.$set(this.dataTags,e-1,this.dataTags[e]),this.$set(this.dataTags,e,a),this.refreshData()}}else if(e!==this.dataTags.length-1){var i=this.dataTags[e+1];this.$set(this.dataTags,e+1,this.dataTags[e]),this.$set(this.dataTags,e,i),this.refreshData()}},downloadTable:function(){var e=this;this.downloadLoading=!0,a.e(0).then(a.bind(null,"zWO4")).then(function(t){var a=X,i=Y,s=e.dataTags,l=e.formatJson(i,s);t.export_json_to_excel({header:a,data:l,filename:"数据标签-设备",autoWidth:!0,bookType:"xlsx"}),e.downloadLoading=!1})},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return"timestamp"===e?L(t[e]):t[e]})})},uploadTable:function(){this.$refs["excel-upload-input"].click()},handleClick:function(e){var t=e.target.files[0];t&&this.upload(t)},upload:function(e){this.$refs["excel-upload-input"].value=null,this.beforeUpload(e)&&this.readerData(e)},beforeUpload:function(e){return e.size/1024/1024<1||(this.$message({message:"文件大小需小于1MB",type:"warning"}),!1)},readerData:function(e){var t=this;return this.loading=!0,new M.a(function(a,i){var s=new FileReader;s.onload=function(e){var i=e.target.result,s=J.a.read(i,{type:"array"}),l=s.SheetNames[0],r=s.Sheets[l],o=t.getHeaderRow(r),n=J.a.utils.sheet_to_json(r);t.generateData({header:o,results:n}),t.loading=!1,a()},s.readAsArrayBuffer(e)})},getHeaderRow:function(e){var t=[],a=J.a.utils.decode_range(e["!ref"]),i=void 0,s=a.s.r;for(i=a.s.c;i<=a.e.c;++i){var l=e[J.a.utils.encode_cell({c:i,r:s})],r="UNKNOWN "+i;l&&l.t&&(r=J.a.utils.format_cell(l)),t.push(r)}return t},generateData:function(e){var t=this,a=(e.header,e.results);a.forEach(function(e){C()(e).forEach(function(a){C()(Q).forEach(function(i){a===Q[i]&&(t.$set(e,i,e[a]),t.$delete(e,a))})})}),console.log(a),this.dataTagsOrg.splice(0,this.dataTagsOrg.length),a.forEach(function(e){t.$set(e,"otherParams",{}),t.dataTagsOrg.push(e)}),this.refreshData()}},watch:{id:function(e){this.getData()}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-component"},[a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"请选择"},on:{change:e.refreshData},model:{value:e.dataTypeSelect,callback:function(t){e.dataTypeSelect=t},expression:"dataTypeSelect"}},e._l(e.dataTypeList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:e.insertTag}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"small",plain:""},on:{click:e.loadTags}},[e._v("加载")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small",plain:""},on:{click:e.deleteTags}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small",plain:"",loading:e.downloadLoading},on:{click:e.downloadTable}},[e._v("导出")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:e.uploadTable}},[e._v("导入")]),e._v(" "),a("input",{ref:"excel-upload-input",staticClass:"excel-upload-input",attrs:{type:"file",accept:".xlsx, .xls"},on:{change:e.handleClick}})],1),e._v(" "),a("el-table",{attrs:{data:e.dataTags,border:"","current-row-key":"","empty-text":"暂无标签","max-height":e.tableMaxHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"index",label:"序号",width:"40"}}),e._v(" "),e._l(e.dataColumns,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label,width:e.width?e.width:"","min-width":e.minWidth?e.minWidth:""}})}),e._v(" "),a("el-table-column",{attrs:{label:"按BCD",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.useBCD?"1":"0")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-edit"},on:{click:function(a){return e.editTag(t.row)}}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"3px"},attrs:{type:"danger",size:"mini",plain:"",icon:"el-icon-delete"},on:{click:function(a){return e.deleteTag(t.row.id)}}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"3px"},attrs:{type:"success",size:"mini",plain:"",icon:"el-icon-top",disabled:1===t.row.index},on:{click:function(a){return e.tagToggle(t.row.index-1,"up")}}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"3px"},attrs:{type:"success",size:"mini",plain:"",icon:"el-icon-bottom",disabled:t.row.index===e.dataTags.length},on:{click:function(a){return e.tagToggle(t.row.index-1,"down")}}})]}}])})],2),e._v(" "),a("el-dialog",{staticClass:"tag-dialog",attrs:{title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dialogForm",attrs:{model:e.formData,"label-position":"left"}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{"label-width":"55px",label:"名称：",prop:"name"}},[a("el-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{"label-width":"55px",label:"描述：",prop:"describe"}},[a("el-input",{model:{value:e.formData.describe,callback:function(t){e.$set(e.formData,"describe",t)},expression:"formData.describe"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{margin:"0 0 20px 10px"},on:{click:e.setParams}},[e._v("其他参数")])],1),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"数据类型：",prop:"dataType"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{placeholder:"请选择"},model:{value:e.formData.dataType,callback:function(t){e.$set(e.formData,"dataType",t)},expression:"formData.dataType"}},e._l(e.dataTypeList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"读写方向：",prop:"direction"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{placeholder:"请选择"},model:{value:e.formData.direction,callback:function(t){e.$set(e.formData,"direction",t)},expression:"formData.direction"}},e._l(e.directionList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{"label-width":"145px",label:"采集周期（毫秒）：",prop:"acquisitionCycle"}},[a("el-input",{model:{value:e.formData.acquisitionCycle,callback:function(t){e.$set(e.formData,"acquisitionCycle",t)},expression:"formData.acquisitionCycle"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:13}},[a("el-form-item",{attrs:{"label-width":"100px",label:"寄存器类型：",prop:"registerType"}},[a("el-select",{staticStyle:{width:"-webkit-fill-available"},attrs:{placeholder:"请选择"},model:{value:e.formData.registerType,callback:function(t){e.$set(e.formData,"registerType",t)},expression:"formData.registerType"}},e._l(e.registerTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{"label-width":"100px",label:"寄存器地址：",prop:"registerAddr"}},[a("el-input",{model:{value:e.formData.registerAddr,callback:function(t){e.$set(e.formData,"registerAddr",t)},expression:"formData.registerAddr"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{"label-width":"85px",label:"解析方式：",prop:"analyticalMethod"}},[a("el-select",{staticStyle:{width:"-webkit-fill-available"},attrs:{placeholder:"请选择"},model:{value:e.formData.analyticalMethod,callback:function(t){e.$set(e.formData,"analyticalMethod",t)},expression:"formData.analyticalMethod"}},e._l(e.analyticalMethodList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{"label-width":"125px",label:"位偏移（0-15）：",prop:"displacementDeviation"}},[a("el-input",{model:{value:e.formData.displacementDeviation,callback:function(t){e.$set(e.formData,"displacementDeviation",t)},expression:"formData.displacementDeviation"}})],1)],1)],1),e._v(" "),a("el-row",{staticClass:"params-dialog-row"},[a("el-checkbox",{model:{value:e.formData.useBCD,callback:function(t){e.$set(e.formData,"useBCD",t)},expression:"formData.useBCD"}},[e._v("使用BCD")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.tagSubmit}},[e._v("确 定")])],1)],1),e._v(" "),a("equipment-tag-params",{ref:"equipmentTagParams",attrs:{"form-data":e.formData}})],1)},staticRenderFns:[]};var pe={components:{EquipmentParams:T,EquipmentTags:a("VU/8")(me,de,!1,function(e){a("7FXC")},"data-v-c09ee7aa",null).exports},props:{id:{type:String},equipmentList:{type:Array}},data:function(){return{formEquipment:{},activeName:"first",activeNames:["1","2","3"]}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.equipmentList.forEach(function(t,a){t.id===e.id&&(e.formEquipment=e.equipmentList[a])}),this.activeName="first"},setParams:function(){this.$refs.equipmentParams.setParams()}},watch:{id:function(e){this.getData()}}},ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"first"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-setting"}),e._v(" 配置参数\n      ")]),e._v(" "),a("el-form",{attrs:{model:e.formEquipment,"label-position":"left"}},[a("el-row",[a("el-col",{staticStyle:{width:"420px"}},[a("el-form-item",{attrs:{"label-width":"95px",label:"名称(英文)：",prop:"equipmentName"}},[a("el-input",{model:{value:e.formEquipment.equipmentName,callback:function(t){e.$set(e.formEquipment,"equipmentName",t)},expression:"formEquipment.equipmentName"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{width:"380px"}},[a("el-form-item",{attrs:{"label-width":"55px",label:"描述：",prop:"equipmentDescribe"}},[a("el-input",{model:{value:e.formEquipment.equipmentDescribe,callback:function(t){e.$set(e.formEquipment,"equipmentDescribe",t)},expression:"formEquipment.equipmentDescribe"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{margin:"0 0 20px 20px"},on:{click:e.setParams}},[e._v("其他参数")])],1),e._v(" "),a("el-row",[a("el-col",{staticStyle:{width:"450px"}},[a("el-form-item",{attrs:{"label-width":"125px",label:"用户参数(如:型)：",prop:"userParam"}},[a("el-input",{model:{value:e.formEquipment.userParam,callback:function(t){e.$set(e.formEquipment,"userParam",t)},expression:"formEquipment.userParam"}})],1)],1)],1)],1),e._v(" "),a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"基本参数",name:"1"}},[a("div",[e._v("MODBUS设备地址："+e._s(e.formEquipment.MODBUSAdd))]),e._v(" "),a("div",[e._v("查询帧查询的最大字数："+e._s(e.formEquipment.searchNum))])]),e._v(" "),a("el-collapse-item",{attrs:{title:"写寄存器",name:"2"}},[a("div",[e._v("单寄存器写是否按6号指令？"+e._s(e.formEquipment.singleRegister?"YES":"NO"))]),e._v(" "),a("div",[e._v("多寄存器写是否按16号指令？"+e._s(e.formEquipment.multiRegister?"YES":"NO"))])]),e._v(" "),a("el-collapse-item",{attrs:{title:"高级参数",name:"3"}},[a("div",[e._v("合对应的值："+e._s(e.formEquipment.correspondingValue))]),e._v(" "),a("div",[e._v("分对应的值："+e._s(e.formEquipment.subCorrespondingValue))]),e._v(" "),a("div",[e._v("双字节校验CRC传送顺序，先低后高？"+e._s(e.formEquipment.doubleByteCheck?"YES":"NO"))])])],1)],1),e._v(" "),a("el-tab-pane",{attrs:{name:"second"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-edit-outline"}),e._v(" 数据标签\n      ")]),e._v(" "),a("equipment-tags",{attrs:{id:e.id,"data-tags-org":e.formEquipment.dataTags}})],1)],1),e._v(" "),a("equipment-params",{ref:"equipmentParams",attrs:{id:e.id,"form-equipment":e.formEquipment}})],1)},staticRenderFns:[]};var fe=[{text:"通用标准",icon:"fa fa-list-alt",id:"1",level:1,children:[{text:"MODBUS TCP",icon:"fa fa-cog",id:"1-1",level:2,name:"IND_MODBUS_TCP",describe:"MODBUS TCP",factory:"莫迪康",classification:"通用标准",path:"C:\\Users\\43577\\Desktop\\软件\\CESTC\\PluginIo\\IND_MODBUS_RTU",plugins:[{name:"BA_BACNET_IP.335x",platform:"335x",edition:"5.0.0.1",lastModifiedDate:"2017-11-08 07:55:30"},{name:"BA_BACNET_IP.dll",platform:"dll",edition:"5.0.0.1",lastModifiedDate:"2019-02-19 03:45:30"},{name:"BA_BACNET_IP.xt",platform:"xt",edition:"",lastModifiedDate:"2020-02-22 08:47:32"}]},{text:"T188 2004",icon:"fa fa-cog",id:"1-2",level:2,name:"IND_CJT188_2004",describe:"T188 2004",factory:"城建",classification:"通用标准",path:"C:\\Users\\43577\\Desktop\\软件\\CESTC\\PluginIo\\IND_CJT188_2004",plugins:[{name:"IND_CJT188_2004.335x",platform:"335x",edition:"5.0.0.1",lastModifiedDate:"2017-11-08 07:55:30"},{name:"IND_CJT188_2004.dll",platform:"dll",edition:"5.0.0.1",lastModifiedDate:"2019-02-19 03:45:30"},{name:"IND_CJT188_2004.xt",platform:"xt",edition:"",lastModifiedDate:"2020-02-22 08:47:32"}]}]},{text:"电力行业标准",icon:"fa fa-list-alt",id:"2",level:1,children:[{text:"DNP3.0协议",icon:"fa fa-cog",id:"2-1",level:2,name:"DL_DNP3",describe:"DNP3.0协议",factory:"",classification:"电力行业标准",path:"C:\\Users\\43577\\Desktop\\软件\\CESTC\\PluginIo\\DL_DNP3",plugins:[{name:"DL_DNP3.dll",platform:"dll",edition:"5.0.0.1",lastModifiedDate:"2019-02-19 03:45:30"}]},{text:"376.1主站",icon:"fa fa-cog",id:"2-2",level:2,name:"ELE_376_1_MASTER",describe:"376.1主站",factory:"电力规约",classification:"电力行业标准",path:"C:\\Users\\43577\\Desktop\\软件\\CESTC\\PluginIo\\ELE_376_1_MASTER",plugins:[{name:"ELE_376_1_MASTER.335x",platform:"335x",edition:"5.0.0.1",lastModifiedDate:"2017-11-08 07:55:30"},{name:"ELE_376_1_MASTER.dll",platform:"dll",edition:"5.0.0.1",lastModifiedDate:"2019-02-19 03:45:30"},{name:"ELE_376_1_MASTER.xt",platform:"xt",edition:"",lastModifiedDate:"2020-02-22 08:47:32"}]}]},{text:"PLC",icon:"fa fa-list-alt",id:"3",level:1,children:[{text:"AB DF1串口协议",icon:"fa fa-cog",id:"3-1",level:2,name:"PLC_AB_DF1",describe:"AB DF1串口协议",factory:"AB(罗克韦尔)",classification:"PLC",path:"C:\\Users\\43577\\Desktop\\软件\\CESTC\\PluginIo\\PLC_AB_DF1",plugins:[{name:"PLC_AB_DF1.335x",platform:"335x",edition:"5.0.0.1",lastModifiedDate:"2017-11-08 07:55:30"},{name:"PLC_AB_DF1.dll",platform:"dll",edition:"5.0.0.1",lastModifiedDate:"2019-02-19 03:45:30"},{name:"PLC_AB_DF1.xt",platform:"xt",edition:"",lastModifiedDate:"2020-02-22 08:47:32"}]},{text:"AB LOGIX 5000 TCP",icon:"fa fa-cog",id:"3-2",level:2,name:"PLC_AB_LOGIX_TCP",describe:"AB LOGIX 5000 TCP",factory:"AB",classification:"PLC",path:"C:\\Users\\43577\\Desktop\\软件\\CESTC\\PluginIo\\PLC_AB_LOGIX_TCP",plugins:[{name:"PLC_AB_LOGIX_TCP.335x",platform:"335x",edition:"5.0.0.1",lastModifiedDate:"2017-11-08 07:55:30"},{name:"PLC_AB_LOGIX_TCP.dll",platform:"dll",edition:"5.0.0.1",lastModifiedDate:"2019-02-19 03:45:30"},{name:"PLC_AB_LOGIX_TCP.xt",platform:"xt",edition:"",lastModifiedDate:"2020-02-22 08:47:32"}]}]}],he=[{id:"1-1",passName:"C1",passDescribe:"通道1",plugin:{name:"IND_MODBUS_TCP",describe:"MODBUS TCP",factory:"莫迪康",classification:"通用标准",path:"C:\\Users\\43577\\Desktop\\软件\\CESTC\\PluginIo\\IND_MODBUS_RTU",plugins:[{name:"BA_BACNET_IP.335x",platform:"335x",edition:"5.0.0.1",lastModifiedDate:"2017-11-08 07:55:30"},{name:"BA_BACNET_IP.dll",platform:"dll",edition:"5.0.0.1",lastModifiedDate:"2019-02-19 03:45:30"},{name:"BA_BACNET_IP.xt",platform:"xt",edition:"",lastModifiedDate:"2020-02-22 08:47:32"}]},passType:"TCP客户端",sata:"COM01",baudRate:"9600",dataBits:"8",checkBits:"无校验",stopBits:"1",ip:"192.168.0.253",port:"50001",bindingIp:"192.168.200.161",otherParams:{scanDelay:!0,delayTime:100,linkReset:!0,linkNoDataTime:60,faultDiagnosis:!0,faultNoDataTime:60,faultShooting:"1",packetScanning:"1",alternatePass:!0,passType:"串口",sata:"COM01",baudRate:"9600",dataBits:"8",checkBits:"无校验",stopBits:"1",ip:"192.168.0.253",port:"50001"},delayTime:10,idFactory:"factory-1"},{id:"1-2",passName:"C2",passDescribe:"通道2",plugin:{name:"IND_CJT188_2004",describe:"T188 2004",factory:"城建",classification:"通用标准",path:"C:\\Users\\43577\\Desktop\\软件\\CESTC\\PluginIo\\IND_CJT188_2004",plugins:[{name:"IND_CJT188_2004.335x",platform:"335x",edition:"5.0.0.1",lastModifiedDate:"2017-11-08 07:55:30"},{name:"IND_CJT188_2004.dll",platform:"dll",edition:"5.0.0.1",lastModifiedDate:"2019-02-19 03:45:30"},{name:"IND_CJT188_2004.xt",platform:"xt",edition:"",lastModifiedDate:"2020-02-22 08:47:32"}]},passType:"虚拟端口",sata:"COM01",baudRate:"9600",dataBits:"8",checkBits:"无校验",stopBits:"1",ip:"192.168.0.253",port:"50001",bindingIp:"192.168.200.161",otherParams:{scanDelay:!0,delayTime:100,linkReset:!1,linkNoDataTime:60,faultDiagnosis:!0,faultNoDataTime:60,faultShooting:"1",packetScanning:"1",alternatePass:!1,passType:"串口",sata:"COM01",baudRate:"9600",dataBits:"8",checkBits:"无校验",stopBits:"1",ip:"192.168.0.253",port:"50001"},delayTime:10,idFactory:"factory-1"},{id:"2-1",passName:"C3",passDescribe:"通道3",plugin:{name:"PLC_AB_LOGIX_TCP",describe:"AB LOGIX 5000 TCP",factory:"AB",classification:"PLC",path:"C:\\Users\\43577\\Desktop\\软件\\CESTC\\PluginIo\\PLC_AB_LOGIX_TCP",plugins:[{name:"PLC_AB_LOGIX_TCP.335x",platform:"335x",edition:"5.0.0.1",lastModifiedDate:"2017-11-08 07:55:30"},{name:"PLC_AB_LOGIX_TCP.dll",platform:"dll",edition:"5.0.0.1",lastModifiedDate:"2019-02-19 03:45:30"},{name:"PLC_AB_LOGIX_TCP.xt",platform:"xt",edition:"",lastModifiedDate:"2020-02-22 08:47:32"}]},passType:"串口",sata:"COM01",baudRate:"9600",dataBits:"8",checkBits:"无校验",stopBits:"1",ip:"192.168.0.253",port:"50001",bindingIp:"192.168.200.161",otherParams:{scanDelay:!1,delayTime:100,linkReset:!1,linkNoDataTime:60,faultDiagnosis:!1,faultNoDataTime:60,faultShooting:"1",packetScanning:"1",alternatePass:!1,passType:"串口",sata:"COM01",baudRate:"9600",dataBits:"8",checkBits:"无校验",stopBits:"1",ip:"192.168.0.253",port:"50001"},delayTime:10,dataTags:[{id:"1",name:"C1.D1.Tag1",describe:"通道1 设备1 标签1",ratioCalculation:!0,magnification:"2.0000",base:"0.0000",dataType:"浮点",direction:"只读",acquisitionCycle:"1000",IOTag:"io.C1.D1.Tag1",IOTagParentId:"1-1-1",IOTagSelectId:"1-1-1-1",slaveStationID:"1",registerType:2,registerAddr:"0",dataFormat:0},{id:"2",name:"C1.D1.Tag2",describe:"通道1 设备1 标签1",ratioCalculation:!0,magnification:"1.0000",base:"0.0000",dataType:"浮点",direction:"只读",acquisitionCycle:"1000",IOTag:"at.C1._io_status",IOTagParentId:"1-1",IOTagSelectId:2,slaveStationID:"1",registerType:2,registerAddr:"0",dataFormat:0},{id:"3",name:"C1.D2.Tag1",describe:"通道1 设备2 标签1",ratioCalculation:!1,magnification:"2.0000",base:"0.0000",dataType:"整型",direction:"只读",acquisitionCycle:"1000",IOTag:"io.C2.D3.Tag2",IOTagParentId:"1-2-1",IOTagSelectId:"1-2-1-1",slaveStationID:"1",registerType:2,registerAddr:"0",dataFormat:0},{id:"4",name:"C1.D2.Tag2",describe:"通道1 设备2 标签2",ratioCalculation:!1,magnification:"1.0000",base:"0.0000",dataType:"字符串",direction:"只读",acquisitionCycle:"1000",IOTag:"at._kernal_version",IOTagParentId:"1",IOTagSelectId:0,slaveStationID:"1",registerType:2,registerAddr:"0",dataFormat:0}],idFactory:"factory-1"}],ge=[{id:"1-1-1",equipmentName:"D1",equipmentDescribe:"设备1",userParam:"",MODBUSAdd:"1",searchNum:32,singleRegister:!0,multiRegister:!0,correspondingValue:"FF00",subCorrespondingValue:"0000",doubleByteCheck:!0,otherParams:{delayTime:3e3,failedTryAgain:!0,failedTryTimes:1,faultDiagnosis:!0,continuousQueryFailed:5,noReceivedLongTime:120,faultDataProcess:"保持之前值，质量戳为GOOD",faultScanProcess:"正常扫描",queryPeriod:30,equipmentFactor:!0,factorR1:"1.000",factorR2:"1.000"},dataTags:[{id:"1-1-1-1",name:"Tag1",describe:"标签1",otherParams:{takeAbsoluteValue:!0,absoluteValue:"",calculation:"不参与计算",ratioCalculation:!0,magnification:"2.0000",base:"0.0000",reverseCoefficient:!1,rangeConversion:!0,maxRange:10,maxGather:4096,minRange:0,minGather:0,dataFilter:!0,maxData:100,minData:0,dataRadio:"1",advancedOperation:"科学计数法",param1:"",param2:"",code:0,cache:!1,alert:!1,maxLimit:"100.0",upperLimit:"80.0",lowerLimit:"20.0",minLimit:"0.0",alarmDelay:"3",alarmLevel:"3"},dataType:"浮点",direction:"只读",acquisitionCycle:"1000",registerType:0,registerAddr:"0",analyticalMethod:1,displacementDeviation:"0",useBCD:!0},{id:"1-1-1-2",name:"Tag2",describe:"标签2",otherParams:{takeAbsoluteValue:!1,absoluteValue:"",calculation:"不参与计算",ratioCalculation:!0,magnification:"2.0000",base:"0.0000",reverseCoefficient:!0,rangeConversion:!1,maxRange:10,maxGather:4096,minRange:0,minGather:0,dataFilter:!0,maxData:100,minData:0,dataRadio:"2",advancedOperation:"科学计数法",param1:"",param2:"",code:0,cache:!1,alert:!1,maxLimit:"100.0",upperLimit:"80.0",lowerLimit:"20.0",minLimit:"0.0",alarmDelay:"3",alarmLevel:"3"},dataType:"整型",direction:"只读",acquisitionCycle:"1000",registerType:2,registerAddr:"0",analyticalMethod:3,displacementDeviation:"0",useBCD:!1}],idFactory:"factory-1"},{id:"1-1-2",equipmentName:"D2",equipmentDescribe:"设备2",userParam:"",MODBUSAdd:"2",searchNum:32,singleRegister:!0,multiRegister:!0,correspondingValue:"FF00",subCorrespondingValue:"0000",doubleByteCheck:!0,otherParams:{delayTime:3e3,failedTryAgain:!0,failedTryTimes:1,faultDiagnosis:!1,continuousQueryFailed:5,noReceivedLongTime:120,faultDataProcess:"保持之前值，质量戳为BAD",faultScanProcess:"正常扫描",queryPeriod:30,equipmentFactor:!0,factorR1:"1.000",factorR2:"1.000"},dataTags:[{id:"1-1-2-1",name:"Tag1",describe:"标签1",otherParams:{takeAbsoluteValue:!0,absoluteValue:"",calculation:"乘设备系数R1",ratioCalculation:!0,magnification:"2.0000",base:"0.0000",reverseCoefficient:!1,rangeConversion:!0,maxRange:10,maxGather:4096,minRange:0,minGather:0,dataFilter:!1,maxData:100,minData:0,dataRadio:"1",advancedOperation:"科学计数法",param1:"",param2:"",code:0,cache:!1,alert:!1,maxLimit:"100.0",upperLimit:"80.0",lowerLimit:"20.0",minLimit:"0.0",alarmDelay:"3",alarmLevel:"3"},dataType:"布尔",direction:"只读",acquisitionCycle:"1000",registerType:0,registerAddr:"0",analyticalMethod:2,displacementDeviation:"0",useBCD:!1},{id:"1-1-2-2",name:"Tag2",describe:"标签2",otherParams:{takeAbsoluteValue:!1,absoluteValue:"",calculation:"不参与计算",ratioCalculation:!0,magnification:"2.0000",base:"0.0000",reverseCoefficient:!0,rangeConversion:!1,maxRange:10,maxGather:4096,minRange:0,minGather:0,dataFilter:!1,maxData:100,minData:0,dataRadio:"1",advancedOperation:"科学计数法",param1:"",param2:"",code:0,cache:!1,alert:!1,maxLimit:"100.0",upperLimit:"80.0",lowerLimit:"20.0",minLimit:"0.0",alarmDelay:"3",alarmLevel:"3"},dataType:"字符串",direction:"只读",acquisitionCycle:"1000",registerType:3,registerAddr:"0",analyticalMethod:3,displacementDeviation:"0",useBCD:!1}],idFactory:"factory-1"},{id:"1-2-1",equipmentName:"D3",equipmentDescribe:"设备3",userParam:"",MODBUSAdd:"3",searchNum:32,singleRegister:!0,multiRegister:!0,correspondingValue:"FF00",subCorrespondingValue:"0000",doubleByteCheck:!0,otherParams:{delayTime:3e3,failedTryAgain:!1,failedTryTimes:1,faultDiagnosis:!0,continuousQueryFailed:5,noReceivedLongTime:120,faultDataProcess:"保持之前值，质量戳为GOOD",faultScanProcess:"正常扫描",queryPeriod:30,equipmentFactor:!1,factorR1:"1.000",factorR2:"1.000"},dataTags:[{id:"1-2-1-1",name:"Tag1",describe:"标签1",otherParams:{takeAbsoluteValue:!0,absoluteValue:"",calculation:"乘设备系数R2",ratioCalculation:!0,magnification:"2.0000",base:"0.0000",reverseCoefficient:!1,rangeConversion:!0,maxRange:10,maxGather:4096,minRange:0,minGather:0,dataFilter:!0,maxData:100,minData:0,dataRadio:"1",advancedOperation:"科学计数法",param1:"",param2:"",code:0,cache:!1,alert:!1,maxLimit:"100.0",upperLimit:"80.0",lowerLimit:"20.0",minLimit:"0.0",alarmDelay:"3",alarmLevel:"3"},dataType:"整型",direction:"只读",acquisitionCycle:"1000",registerType:1,registerAddr:"0",analyticalMethod:2,displacementDeviation:"0",useBCD:!1},{id:"1-2-1-2",name:"Tag2",describe:"标签2",otherParams:{takeAbsoluteValue:!1,absoluteValue:"",calculation:"不参与计算",ratioCalculation:!0,magnification:"2.0000",base:"0.0000",reverseCoefficient:!0,rangeConversion:!1,maxRange:10,maxGather:4096,minRange:0,minGather:0,dataFilter:!0,maxData:100,minData:0,dataRadio:"2",advancedOperation:"科学计数法",param1:"",param2:"",code:0,cache:!1,alert:!1,maxLimit:"100.0",upperLimit:"80.0",lowerLimit:"20.0",minLimit:"0.0",alarmDelay:"3",alarmLevel:"3"},dataType:"整型",direction:"只读",acquisitionCycle:"1000",registerType:0,registerAddr:"0",analyticalMethod:0,displacementDeviation:"0",useBCD:!1}],idFactory:"factory-1"},{id:"1-2-2",equipmentName:"D4",equipmentDescribe:"设备4",userParam:"",MODBUSAdd:"4",searchNum:32,singleRegister:!0,multiRegister:!0,correspondingValue:"FF00",subCorrespondingValue:"0000",doubleByteCheck:!0,otherParams:{delayTime:3e3,failedTryAgain:!1,failedTryTimes:1,faultDiagnosis:!1,continuousQueryFailed:5,noReceivedLongTime:120,faultDataProcess:"保持之前值，质量戳为GOOD",faultScanProcess:"正常扫描",queryPeriod:30,equipmentFactor:!1,factorR1:"1.000",factorR2:"1.000"},dataTags:[{id:"1-2-2-1",name:"Tag1",describe:"标签1",otherParams:{takeAbsoluteValue:!0,absoluteValue:"",calculation:"乘设备系数R1*R2",ratioCalculation:!0,magnification:"2.0000",base:"0.0000",reverseCoefficient:!1,rangeConversion:!0,maxRange:10,maxGather:4096,minRange:0,minGather:0,dataFilter:!1,maxData:100,minData:0,dataRadio:"1",advancedOperation:"科学计数法",param1:"",param2:"",code:0,cache:!1,alert:!1,maxLimit:"100.0",upperLimit:"80.0",lowerLimit:"20.0",minLimit:"0.0",alarmDelay:"3",alarmLevel:"3"},dataType:"整型",direction:"只读",acquisitionCycle:"1000",registerType:0,registerAddr:"0",analyticalMethod:3,displacementDeviation:"0",useBCD:!1},{id:"1-2-2-2",name:"Tag2",describe:"标签2",otherParams:{takeAbsoluteValue:!1,absoluteValue:"",calculation:"不参与计算",ratioCalculation:!0,magnification:"2.0000",base:"0.0000",reverseCoefficient:!0,rangeConversion:!1,maxRange:10,maxGather:4096,minRange:0,minGather:0,dataFilter:!1,maxData:100,minData:0,dataRadio:"1",advancedOperation:"科学计数法",param1:"",param2:"",code:0,cache:!1,alert:!1,maxLimit:"100.0",upperLimit:"80.0",lowerLimit:"20.0",minLimit:"0.0",alarmDelay:"3",alarmLevel:"3"},dataType:"二进制",direction:"只写",acquisitionCycle:"2000",registerType:1,registerAddr:"0",analyticalMethod:5,displacementDeviation:"0",useBCD:!1}],idFactory:"factory-1"}],be={components:{Header:A,LeftTree:h,Group:R,Pass:oe,Equipment:a("VU/8")(pe,ue,!1,function(e){a("DMXl")},"data-v-bd20779c",null).exports},data:function(){return{treeData:[],factoryData:[],passList:[],pluginList:[],equipmentList:[],serviceData:{},serviceId:"",passTypeList:["串口","TCP客户端","TCP服务端","UDP","虚拟端口"],sataList:["COM01","COM02","COM03"],baudList:["1200","2400","4800","9600"],dataList:["4","5","6","7","8"],checkList:["无校验","奇校验","偶校验","MARK校验","SPACE校验"],stopList:["1","1.5","2"],level:1,id:null,handleType:"",idFactory:"factory-1",contentHeight:"0px"}},created:function(){var e=document.documentElement.clientHeight;this.contentHeight=e-16-74+"px",this.getTreeData()},methods:{getTreeData:function(){var e=this;this.factoryData=E,this.factoryData[0].children.forEach(function(t){t.children.forEach(function(t){t.selected&&(e.serviceData=t,e.serviceId=e.serviceData.id,e.treeData=t.treeData)})}),this.pluginList=fe,this.passListAll=he,this.equipmentListAll=ge,this.refreshData()},refreshData:function(){var e=this;this.passList=this.passListAll.filter(function(t){return t.idFactory===e.idFactory}),this.equipmentList=this.equipmentListAll.filter(function(t){return t.idFactory===e.idFactory})},itemClick:function(e){var t=e.level,a=e.id;this.level=t,this.id=a},itemHandle:function(e){var t=this;this.handleType=e,"up"!==this.handleType&&"down"!==this.handleType||this.treeData.forEach(function(e,a){if("up"===t.handleType&&e.children.forEach(function(a,i){if(2===t.level&&a.id===t.id){if(!e.children[i-1])return t.moveEnd("已经到最顶层"),!1;t.toggleExchange(e.children,i,"up"),a.selected=!1,t.refreshSelect()}3===t.level&&a.children.forEach(function(e,i){if(e.id===t.id){if(!a.children[i-1])return t.moveEnd("已经到最顶层"),!1;t.toggleExchange(a.children,i,"up"),e.selected=!1,t.refreshSelect()}})}),"down"===t.handleType)for(var i=e.children.length-1;i>=0;i--){if(2===t.level&&e.children[i].id===t.id){if(!e.children[i+1])return t.moveEnd("已经到最底层"),!1;t.toggleExchange(e.children,i,"down"),e.children[i+1].selected=!1,t.refreshSelect()}if(3===t.level)for(var s=e.children[i].children.length-1;s>=0;s--)if(e.children[i].children[s].id===t.id){if(!e.children[i].children[s+1])return t.moveEnd("已经到最底层"),!1;t.toggleExchange(e.children[i].children,s,"down"),e.children[i].children[s+1].selected=!1,t.refreshSelect()}}}),"del"===this.handleType&&this.$confirm("将删除采集"+(2===this.level?"通道":"设备")+", 是否继续?","提示",{type:"warning"}).then(function(){t.treeData.forEach(function(e){e.children.forEach(function(a,i){2===t.level&&t.id===a.id&&(a.children.forEach(function(e,a){t.equipmentListAll.forEach(function(a,i){e.id===a.id&&t.equipmentListAll.splice(i,1)})}),e.children.splice(i,1),t.passListAll.forEach(function(e,i){e.id===a.id&&t.passListAll.splice(i,1)}),t.refreshData()),3===t.level&&a.children.forEach(function(e,i){t.id===e.id&&(a.children.splice(i,1),t.equipmentListAll.forEach(function(a,i){a.id===e.id&&t.equipmentListAll.splice(i,1)}))})})}),t.refreshData(),t.refreshSelect()}).catch(function(){}),"add"===this.handleType&&this.$refs.header.newBuild(),"copy"===this.handleType&&this.$refs.header.copyItems()},refreshSelect:function(){var e=this;this.$nextTick(function(){e.level=1,e.id="1",e.$set(e.treeData[0],"selected",!0)})},moveEnd:function(e){this.$message({message:e,type:"error",duration:1e3})},toggleExchange:function(e,t,a){var i="up"===a?e[t-1]:e[t+1];this.$set(e,"up"===a?t-1:t+1,e[t]),this.$set(e,t,i)},itemAdd:function(e){var t=this;this.treeData.forEach(function(a){if(1===t.level&&a.id===t.id){e.id=t.id+Math.random().toString(36).substr(-10),e.idFactory=t.idFactory;var i={text:e.passName+"["+e.passDescribe+"]",icon:"fa fa-laptop",id:e.id,level:2,children:[],selected:!1,opened:!0};a.children.push(i),t.passListAll.push(e),t.refreshData()}2===t.level&&a.children.forEach(function(a){if(a.id===t.id){e.id=Math.random().toString(36).substr(-10),e.idFactory=t.idFactory;var i={text:e.equipmentName+"["+e.equipmentDescribe+"]",icon:"fa fa-edit",id:e.id,level:3,selected:!1};a.children.push(i),t.equipmentListAll.push(e),t.refreshData()}})}),this.$refs.group&&this.$nextTick(function(){t.$refs.group.getServiceData()})},itemsCopy:function(e){var t=this;this.treeData.forEach(function(a){1===t.level&&a.id===t.id&&(e.forEach(function(e){var i=JSON.parse(n()(e));i.id=t.id+Math.random().toString(36).substr(-10);var s={text:i.passName+"["+i.passDescribe+"]",icon:"fa fa-laptop",id:i.id,level:2,children:[],selected:!1,opened:!0};a.children.push(s),t.passListAll.push(i)}),t.refreshData()),2===t.level&&a.children.forEach(function(a){a.id===t.id&&(e.forEach(function(e){var i=JSON.parse(n()(e));i.id=t.id+Math.random().toString(36).substr(-10);var s={text:i.equipmentName+"["+i.equipmentDescribe+"]",icon:"fa fa-edit",id:i.id,level:3,selected:!1};a.children.push(s),t.equipmentListAll.push(i)}),t.refreshData())})})},factorySelect:function(e){var t=e.level,a=e.id;3===t&&(this.serviceData=e,this.serviceId=this.serviceData.id,this.idFactory=a,this.treeData=e.treeData,0!==this.treeData.length&&(this.treeData.forEach(function(e){e.selected=!1,e.children.forEach(function(e){e.selected=!1,e.children.forEach(function(e){e.selected=!1})})}),this.refreshSelect()),this.refreshData())}}},ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-tree-container"},[a("el-container",[a("el-header",[a("Header",{ref:"header",attrs:{handleType:e.handleType,level:e.level,id:e.id,"id-factory":e.idFactory,"tree-data":e.treeData,"factory-data":e.factoryData,"pass-list":e.passList,"plugin-list":e.pluginList,"pass-type-list":e.passTypeList,"sata-list":e.sataList,"baud-list":e.baudList,"data-list":e.dataList,"check-list":e.checkList,"equipment-list":e.equipmentList},on:{"item-add":e.itemAdd,"items-copy":e.itemsCopy,"item-delete":function(t){return e.itemHandle("del")},"factory-select":e.factorySelect}})],1),e._v(" "),a("el-container",[a("el-aside",{staticClass:"left-panel",style:{height:e.contentHeight}},[a("div",{staticClass:"left-panel-title"},[e._v("服务导航")]),e._v(" "),0!==e.treeData.length?a("left-tree",{staticClass:"left-panel-tree",attrs:{data:e.treeData,id:e.id},on:{"item-click":e.itemClick,"item-handle":e.itemHandle}}):a("div",{staticClass:"left-panel-tree"},[e._v("未选中工程")])],1),e._v(" "),a("el-container",{staticClass:"right-panel is-vertical"},[1===e.level?a("Group",{ref:"group",attrs:{"service-id":e.serviceId,"factory-data":e.factoryData,"service-data":e.serviceData,"pass-list":e.passList,"equipment-list":e.equipmentList,"pass-type-list":e.passTypeList,"sata-list":e.sataList,"baud-list":e.baudList,"data-list":e.dataList,"check-list":e.checkList,"stop-list":e.stopList}}):e._e(),e._v(" "),2===e.level?a("Pass",{attrs:{id:e.id,"tree-data":e.treeData,"pass-list":e.passList,"equipment-list":e.equipmentList,"plugin-list":e.pluginList,"pass-type-list":e.passTypeList,"sata-list":e.sataList,"baud-list":e.baudList,"data-list":e.dataList,"check-list":e.checkList,"stop-list":e.stopList}}):e._e(),e._v(" "),3===e.level?a("Equipment",{attrs:{id:e.id,"equipment-list":e.equipmentList}}):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var ye=a("VU/8")(be,ve,!1,function(e){a("ejHe")},"data-v-0e4672f5",null).exports;i.default.use(r.a);var _e=new r.a({routes:[{path:"/",name:"Page",component:ye}]}),De=a("zL8q"),Pe=a.n(De);a("tvR6"),a("vfGB");i.default.use(Pe.a),i.default.config.productionTip=!1,new i.default({el:"#app",router:_e,components:{App:l},template:"<App/>"})},UNiF:function(e,t){},ZiLO:function(e,t){},eD9u:function(e,t){},ejHe:function(e,t){},feFl:function(e,t){},kKoi:function(e,t){},"o8i/":function(e,t){},qoqu:function(e,t){},tvR6:function(e,t){},uiqG:function(e,t){},vfGB:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.8064d0f84fb00e39331c.js.map